import{o as jn}from"./@babel-ee6b9e1a.js";var xe={exports:{}};(function(Xn,be){(function(k,Pt){Pt(be)})(jn,function(k){var Pt="2.0.62",Y=function(i){i&&i.clearRect&&i.clearRect(0,0,i.canvas.width,i.canvas.height)},Ce=function(i){var t=window.devicePixelRatio||1;i.canvas.width=i.canvas.width*t,i.canvas.height=i.canvas.height*t,i.canvas.style.width=i.canvas.width/t+"px",i.canvas.style.height=i.canvas.height/t+"px",i.scale(t,t)};function ft(){this._subscribers={}}ft.prototype.on=function(i,t){var n=this._subscribers[i];n||(n=[],this._subscribers[i]=n),n.push({callback:t})},ft.prototype.off=function(i,t){var n=this._subscribers[i];if(n)for(var e=0;e<n.length;e++)n[e].callback==t&&(n.splice(e,1),e--)},ft.prototype._trigger=function(i,t,n){if(i=="*")throw new Error("Cannot trigger event *");var e=[];i in this._subscribers&&(e=e.concat(this._subscribers[i])),"*"in this._subscribers&&(e=e.concat(this._subscribers["*"]));for(var a=0,r=e.length;a<r;a++){var o=e[a];o.callback&&o.callback(i,t,n||null)}};var ht={municipalities:[{n:"\u5317\u4EAC",g:"116.395645,39.929986|12"},{n:"\u4E0A\u6D77",g:"121.487899,31.249162|12"},{n:"\u5929\u6D25",g:"117.210813,39.14393|12"},{n:"\u91CD\u5E86",g:"106.530635,29.544606|12"}],provinces:[{n:"\u5B89\u5FBD",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80A5",g:"117.282699,31.866942|12"},{n:"\u5B89\u5E86",g:"117.058739,30.537898|13"},{n:"\u868C\u57E0",g:"117.35708,32.929499|13"},{n:"\u4EB3\u5DDE",g:"115.787928,33.871211|13"},{n:"\u5DE2\u6E56",g:"117.88049,31.608733|13"},{n:"\u6C60\u5DDE",g:"117.494477,30.660019|14"},{n:"\u6EC1\u5DDE",g:"118.32457,32.317351|13"},{n:"\u961C\u9633",g:"115.820932,32.901211|13"},{n:"\u6DEE\u5317",g:"116.791447,33.960023|13"},{n:"\u6DEE\u5357",g:"117.018639,32.642812|13"},{n:"\u9EC4\u5C71",g:"118.29357,29.734435|13"},{n:"\u516D\u5B89",g:"116.505253,31.755558|13"},{n:"\u9A6C\u978D\u5C71",g:"118.515882,31.688528|13"},{n:"\u5BBF\u5DDE",g:"116.988692,33.636772|13"},{n:"\u94DC\u9675",g:"117.819429,30.94093|14"},{n:"\u829C\u6E56",g:"118.384108,31.36602|12"},{n:"\u5BA3\u57CE",g:"118.752096,30.951642|13"}]},{n:"\u798F\u5EFA",g:"117.984943,26.050118|8",cities:[{n:"\u798F\u5DDE",g:"119.330221,26.047125|12"},{n:"\u9F99\u5CA9",g:"117.017997,25.078685|13"},{n:"\u5357\u5E73",g:"118.181883,26.643626|13"},{n:"\u5B81\u5FB7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6CC9\u5DDE",g:"118.600362,24.901652|12"},{n:"\u4E09\u660E",g:"117.642194,26.270835|14"},{n:"\u53A6\u95E8",g:"118.103886,24.489231|12"},{n:"\u6F33\u5DDE",g:"117.676205,24.517065|12"}]},{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5DDE",g:"103.823305,36.064226|12"},{n:"\u767D\u94F6",g:"104.171241,36.546682|13"},{n:"\u5B9A\u897F",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5DDE",g:"102.917442,34.992211|14"},{n:"\u5609\u5CEA\u5173",g:"98.281635,39.802397|13"},{n:"\u91D1\u660C",g:"102.208126,38.516072|13"},{n:"\u9152\u6CC9",g:"98.508415,39.741474|13"},{n:"\u4E34\u590F\u5DDE",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5E73\u51C9",g:"106.688911,35.55011|13"},{n:"\u5E86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6C34",g:"105.736932,34.584319|13"},{n:"\u6B66\u5A01",g:"102.640147,37.933172|13"},{n:"\u5F20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5E7F\u4E1C",g:"113.394818,23.408004|8",cities:[{n:"\u5E7F\u5DDE",g:"113.30765,23.120049|12"},{n:"\u6F6E\u5DDE",g:"116.630076,23.661812|13"},{n:"\u4E1C\u839E",g:"113.763434,23.043024|12"},{n:"\u4F5B\u5C71",g:"113.134026,23.035095|13"},{n:"\u6CB3\u6E90",g:"114.713721,23.757251|12"},{n:"\u60E0\u5DDE",g:"114.410658,23.11354|12"},{n:"\u6C5F\u95E8",g:"113.078125,22.575117|13"},{n:"\u63ED\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540D",g:"110.931245,21.668226|13"},{n:"\u6885\u5DDE",g:"116.126403,24.304571|13"},{n:"\u6E05\u8FDC",g:"113.040773,23.698469|13"},{n:"\u6C55\u5934",g:"116.72865,23.383908|13"},{n:"\u6C55\u5C3E",g:"115.372924,22.778731|14"},{n:"\u97F6\u5173",g:"113.594461,24.80296|13"},{n:"\u6DF1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6C5F",g:"111.97701,21.871517|14"},{n:"\u4E91\u6D6E",g:"112.050946,22.937976|13"},{n:"\u6E5B\u6C5F",g:"110.365067,21.257463|13"},{n:"\u8087\u5E86",g:"112.479653,23.078663|13"},{n:"\u4E2D\u5C71",g:"113.42206,22.545178|12"},{n:"\u73E0\u6D77",g:"113.562447,22.256915|13"}]},{n:"\u5E7F\u897F",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5B81",g:"108.297234,22.806493|12"},{n:"\u767E\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6D77",g:"109.122628,21.472718|13"},{n:"\u5D07\u5DE6",g:"107.357322,22.415455|14"},{n:"\u9632\u57CE\u6E2F",g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8D35\u6E2F",g:"109.613708,23.103373|13"},{n:"\u6CB3\u6C60",g:"108.069948,24.699521|14"},{n:"\u8D3A\u5DDE",g:"111.552594,24.411054|14"},{n:"\u6765\u5BBE",g:"109.231817,23.741166|14"},{n:"\u67F3\u5DDE",g:"109.422402,24.329053|12"},{n:"\u94A6\u5DDE",g:"108.638798,21.97335|13"},{n:"\u68A7\u5DDE",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8D35\u5DDE",g:"106.734996,26.902826|8",cities:[{n:"\u8D35\u9633",g:"106.709177,26.629907|12"},{n:"\u5B89\u987A",g:"105.92827,26.228595|13"},{n:"\u6BD5\u8282\u5730\u533A",g:"105.300492,27.302612|14"},{n:"\u516D\u76D8\u6C34",g:"104.852087,26.591866|13"},{n:"\u94DC\u4EC1\u5730\u533A",g:"109.196161,27.726271|14"},{n:"\u9075\u4E49",g:"106.93126,27.699961|13"},{n:"\u9ED4\u897F\u5357\u5DDE",g:"104.900558,25.095148|11"},{n:"\u9ED4\u4E1C\u5357\u5DDE",g:"107.985353,26.583992|11"},{n:"\u9ED4\u5357\u5DDE",g:"107.523205,26.264536|11"}]},{n:"\u6D77\u5357",g:"109.733755,19.180501|9",cities:[{n:"\u6D77\u53E3",g:"110.330802,20.022071|13"},{n:"\u767D\u6C99",g:"109.358586,19.216056|12"},{n:"\u4FDD\u4EAD",g:"109.656113,18.597592|12"},{n:"\u660C\u6C5F",g:"109.0113,19.222483|12"},{n:"\u510B\u5DDE",g:"109.413973,19.571153|13"},{n:"\u6F84\u8FC8",g:"109.996736,19.693135|13"},{n:"\u4E1C\u65B9",g:"108.85101,18.998161|13"},{n:"\u5B9A\u5B89",g:"110.32009,19.490991|13"},{n:"\u743C\u6D77",g:"110.414359,19.21483|13"},{n:"\u743C\u4E2D",g:"109.861849,19.039771|12"},{n:"\u4E50\u4E1C",g:"109.062698,18.658614|12"},{n:"\u4E34\u9AD8",g:"109.724101,19.805922|13"},{n:"\u9675\u6C34",g:"109.948661,18.575985|12"},{n:"\u4E09\u4E9A",g:"109.522771,18.257776|12"},{n:"\u5C6F\u660C",g:"110.063364,19.347749|13"},{n:"\u4E07\u5B81",g:"110.292505,18.839886|13"},{n:"\u6587\u660C",g:"110.780909,19.750947|13"},{n:"\u4E94\u6307\u5C71",g:"109.51775,18.831306|13"}]},{n:"\u6CB3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77F3\u5BB6\u5E84",g:"114.522082,38.048958|12"},{n:"\u4FDD\u5B9A",g:"115.49481,38.886565|13"},{n:"\u6CA7\u5DDE",g:"116.863806,38.297615|13"},{n:"\u627F\u5FB7",g:"117.933822,40.992521|14"},{n:"\u90AF\u90F8",g:"114.482694,36.609308|13"},{n:"\u8861\u6C34",g:"115.686229,37.746929|13"},{n:"\u5ECA\u574A",g:"116.703602,39.518611|13"},{n:"\u79E6\u7687\u5C9B",g:"119.604368,39.945462|12"},{n:"\u5510\u5C71",g:"118.183451,39.650531|13"},{n:"\u90A2\u53F0",g:"114.520487,37.069531|13"},{n:"\u5F20\u5BB6\u53E3",g:"114.893782,40.811188|13"}]},{n:"\u6CB3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90D1\u5DDE",g:"113.649644,34.75661|12"},{n:"\u5B89\u9633",g:"114.351807,36.110267|12"},{n:"\u9E64\u58C1",g:"114.29777,35.755426|13"},{n:"\u7126\u4F5C",g:"113.211836,35.234608|13"},{n:"\u5F00\u5C01",g:"114.351642,34.801854|13"},{n:"\u6D1B\u9633",g:"112.447525,34.657368|12"},{n:"\u6F2F\u6CB3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5E73\u9876\u5C71",g:"113.300849,33.745301|13"},{n:"\u6FEE\u9633",g:"115.026627,35.753298|12"},{n:"\u4E09\u95E8\u5CE1",g:"111.181262,34.78332|13"},{n:"\u5546\u4E18",g:"115.641886,34.438589|13"},{n:"\u65B0\u4E61",g:"113.91269,35.307258|13"},{n:"\u4FE1\u9633",g:"114.085491,32.128582|13"},{n:"\u8BB8\u660C",g:"113.835312,34.02674|13"},{n:"\u5468\u53E3",g:"114.654102,33.623741|13"},{n:"\u9A7B\u9A6C\u5E97",g:"114.049154,32.983158|13"}]},{n:"\u9ED1\u9F99\u6C5F",g:"128.047414,47.356592|6",cities:[{n:"\u54C8\u5C14\u6EE8",g:"126.657717,45.773225|12"},{n:"\u5927\u5E86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5B89\u5CAD\u5730\u533A",g:"124.196104,51.991789|10"},{n:"\u9E64\u5C97",g:"130.292472,47.338666|13"},{n:"\u9ED1\u6CB3",g:"127.50083,50.25069|14"},{n:"\u9E21\u897F",g:"130.941767,45.32154|13"},{n:"\u4F73\u6728\u65AF",g:"130.284735,46.81378|12"},{n:"\u7261\u4E39\u6C5F",g:"129.608035,44.588521|13"},{n:"\u4E03\u53F0\u6CB3",g:"131.019048,45.775005|14"},{n:"\u9F50\u9F50\u54C8\u5C14",g:"123.987289,47.3477|13"},{n:"\u53CC\u9E2D\u5C71",g:"131.171402,46.655102|13"},{n:"\u7EE5\u5316",g:"126.989095,46.646064|13"},{n:"\u4F0A\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6E56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6B66\u6C49",g:"114.3162,30.581084|12"},{n:"\u9102\u5DDE",g:"114.895594,30.384439|14"},{n:"\u6069\u65BD",g:"109.517433,30.308978|14"},{n:"\u9EC4\u5188",g:"114.906618,30.446109|14"},{n:"\u9EC4\u77F3",g:"115.050683,30.216127|13"},{n:"\u8346\u95E8",g:"112.21733,31.042611|13"},{n:"\u8346\u5DDE",g:"112.241866,30.332591|12"},{n:"\u6F5C\u6C5F",g:"112.768768,30.343116|13"},{n:"\u795E\u519C\u67B6\u6797\u533A",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968F\u5DDE",g:"113.379358,31.717858|13"},{n:"\u5929\u95E8",g:"113.12623,30.649047|13"},{n:"\u4ED9\u6843",g:"113.387448,30.293966|13"},{n:"\u54B8\u5B81",g:"114.300061,29.880657|13"},{n:"\u8944\u9633",g:"112.176326,32.094934|12"},{n:"\u5B5D\u611F",g:"113.935734,30.927955|13"},{n:"\u5B9C\u660C",g:"111.310981,30.732758|13"}]},{n:"\u6E56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957F\u6C99",g:"112.979353,28.213478|12"},{n:"\u5E38\u5FB7",g:"111.653718,29.012149|12"},{n:"\u90F4\u5DDE",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5A04\u5E95",g:"111.996396,27.741073|13"},{n:"\u90B5\u9633",g:"111.461525,27.236811|13"},{n:"\u6E58\u6F6D",g:"112.935556,27.835095|13"},{n:"\u6E58\u897F\u5DDE",g:"109.745746,28.317951|14"},{n:"\u76CA\u9633",g:"112.366547,28.588088|13"},{n:"\u6C38\u5DDE",g:"111.614648,26.435972|13"},{n:"\u5CB3\u9633",g:"113.146196,29.378007|13"},{n:"\u5F20\u5BB6\u754C",g:"110.48162,29.124889|13"},{n:"\u682A\u6D32",g:"113.131695,27.827433|13"}]},{n:"\u6C5F\u82CF",g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4EAC",g:"118.778074,32.057236|12"},{n:"\u5E38\u5DDE",g:"119.981861,31.771397|12"},{n:"\u6DEE\u5B89",g:"119.030186,33.606513|12"},{n:"\u8FDE\u4E91\u6E2F",g:"119.173872,34.601549|12"},{n:"\u5357\u901A",g:"120.873801,32.014665|12"},{n:"\u82CF\u5DDE",g:"120.619907,31.317987|12"},{n:"\u5BBF\u8FC1",g:"118.296893,33.95205|13"},{n:"\u6CF0\u5DDE",g:"119.919606,32.476053|13"},{n:"\u65E0\u9521",g:"120.305456,31.570037|12"},{n:"\u5F90\u5DDE",g:"117.188107,34.271553|12"},{n:"\u76D0\u57CE",g:"120.148872,33.379862|12"},{n:"\u626C\u5DDE",g:"119.427778,32.408505|13"},{n:"\u9547\u6C5F",g:"119.455835,32.204409|13"}]},{n:"\u6C5F\u897F",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660C",g:"115.893528,28.689578|12"},{n:"\u629A\u5DDE",g:"116.360919,27.954545|13"},{n:"\u8D63\u5DDE",g:"114.935909,25.845296|13"},{n:"\u5409\u5B89",g:"114.992039,27.113848|13"},{n:"\u666F\u5FB7\u9547",g:"117.186523,29.303563|12"},{n:"\u4E5D\u6C5F",g:"115.999848,29.71964|13"},{n:"\u840D\u4E61",g:"113.859917,27.639544|13"},{n:"\u4E0A\u9976",g:"117.955464,28.457623|13"},{n:"\u65B0\u4F59",g:"114.947117,27.822322|13"},{n:"\u5B9C\u6625",g:"114.400039,27.81113|13"},{n:"\u9E70\u6F6D",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957F\u6625",g:"125.313642,43.898338|12"},{n:"\u767D\u57CE",g:"122.840777,45.621086|13"},{n:"\u767D\u5C71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797",g:"126.564544,43.871988|12"},{n:"\u8FBD\u6E90",g:"125.133686,42.923303|13"},{n:"\u56DB\u5E73",g:"124.391382,43.175525|12"},{n:"\u677E\u539F",g:"124.832995,45.136049|13"},{n:"\u901A\u5316",g:"125.94265,41.736397|13"},{n:"\u5EF6\u8FB9",g:"129.485902,42.896414|13"}]},{n:"\u8FBD\u5B81",g:"122.753592,41.6216|8",cities:[{n:"\u6C88\u9633",g:"123.432791,41.808645|12"},{n:"\u978D\u5C71",g:"123.007763,41.118744|13"},{n:"\u672C\u6EAA",g:"123.778062,41.325838|12"},{n:"\u671D\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8FDE",g:"121.593478,38.94871|12"},{n:"\u4E39\u4E1C",g:"124.338543,40.129023|12"},{n:"\u629A\u987A",g:"123.92982,41.877304|12"},{n:"\u961C\u65B0",g:"121.660822,42.01925|14"},{n:"\u846B\u82A6\u5C9B",g:"120.860758,40.74303|13"},{n:"\u9526\u5DDE",g:"121.147749,41.130879|13"},{n:"\u8FBD\u9633",g:"123.172451,41.273339|14"},{n:"\u76D8\u9526",g:"122.073228,41.141248|13"},{n:"\u94C1\u5CAD",g:"123.85485,42.299757|13"},{n:"\u8425\u53E3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53E4",g:"114.415868,43.468238|5",cities:[{n:"\u547C\u548C\u6D69\u7279",g:"111.660351,40.828319|12"},{n:"\u963F\u62C9\u5584\u76DF",g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5DF4\u5F66\u6DD6\u5C14",g:"107.423807,40.76918|12"},{n:"\u8D64\u5CF0",g:"118.930761,42.297112|12"},{n:"\u9102\u5C14\u591A\u65AF",g:"109.993706,39.81649|12"},{n:"\u547C\u4F26\u8D1D\u5C14",g:"119.760822,49.201636|12"},{n:"\u901A\u8FBD",g:"122.260363,43.633756|12"},{n:"\u4E4C\u6D77",g:"106.831999,39.683177|13"},{n:"\u4E4C\u5170\u5BDF\u5E03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ED\u52D2\u76DF",g:"116.02734,43.939705|11"},{n:"\u5174\u5B89\u76DF",g:"122.048167,46.083757|11"}]},{n:"\u5B81\u590F",g:"106.155481,37.321323|8",cities:[{n:"\u94F6\u5DDD",g:"106.206479,38.502621|12"},{n:"\u56FA\u539F",g:"106.285268,36.021523|13"},{n:"\u77F3\u5634\u5C71",g:"106.379337,39.020223|13"},{n:"\u5434\u5FE0",g:"106.208254,37.993561|14"},{n:"\u4E2D\u536B",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6D77",g:"96.202544,35.499761|7",cities:[{n:"\u897F\u5B81",g:"101.767921,36.640739|12"},{n:"\u679C\u6D1B\u5DDE",g:"100.223723,34.480485|11"},{n:"\u6D77\u4E1C\u5730\u533A",g:"102.085207,36.51761|11"},{n:"\u6D77\u5317\u5DDE",g:"100.879802,36.960654|11"},{n:"\u6D77\u5357\u5DDE",g:"100.624066,36.284364|11"},{n:"\u6D77\u897F\u5DDE",g:"97.342625,37.373799|11"},{n:"\u9EC4\u5357\u5DDE",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5DDE",g:"97.013316,33.00624|14"}]},{n:"\u5C71\u4E1C",g:"118.527663,36.09929|8",cities:[{n:"\u6D4E\u5357",g:"117.024967,36.682785|12"},{n:"\u6EE8\u5DDE",g:"117.968292,37.405314|12"},{n:"\u4E1C\u8425",g:"118.583926,37.487121|12"},{n:"\u5FB7\u5DDE",g:"116.328161,37.460826|12"},{n:"\u83CF\u6CFD",g:"115.46336,35.26244|13"},{n:"\u6D4E\u5B81",g:"116.600798,35.402122|13"},{n:"\u83B1\u829C",g:"117.684667,36.233654|13"},{n:"\u804A\u57CE",g:"115.986869,36.455829|12"},{n:"\u4E34\u6C82",g:"118.340768,35.072409|12"},{n:"\u9752\u5C9B",g:"120.384428,36.105215|12"},{n:"\u65E5\u7167",g:"119.50718,35.420225|12"},{n:"\u6CF0\u5B89",g:"117.089415,36.188078|13"},{n:"\u5A01\u6D77",g:"122.093958,37.528787|13"},{n:"\u6F4D\u574A",g:"119.142634,36.716115|12"},{n:"\u70DF\u53F0",g:"121.309555,37.536562|12"},{n:"\u67A3\u5E84",g:"117.279305,34.807883|13"},{n:"\u6DC4\u535A",g:"118.059134,36.804685|12"}]},{n:"\u5C71\u897F",g:"112.515496,37.866566|7",cities:[{n:"\u592A\u539F",g:"112.550864,37.890277|12"},{n:"\u957F\u6CBB",g:"113.120292,36.201664|12"},{n:"\u5927\u540C",g:"113.290509,40.113744|12"},{n:"\u664B\u57CE",g:"112.867333,35.499834|13"},{n:"\u664B\u4E2D",g:"112.738514,37.693362|13"},{n:"\u4E34\u6C7E",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},{n:"\u6714\u5DDE",g:"112.479928,39.337672|13"},{n:"\u5FFB\u5DDE",g:"112.727939,38.461031|12"},{n:"\u9633\u6CC9",g:"113.569238,37.869529|13"},{n:"\u8FD0\u57CE",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897F",g:"109.503789,35.860026|7",cities:[{n:"\u897F\u5B89",g:"108.953098,34.2778|12"},{n:"\u5B89\u5EB7",g:"109.038045,32.70437|13"},{n:"\u5B9D\u9E21",g:"107.170645,34.364081|12"},{n:"\u6C49\u4E2D",g:"107.045478,33.081569|13"},{n:"\u5546\u6D1B",g:"109.934208,33.873907|13"},{n:"\u94DC\u5DDD",g:"108.968067,34.908368|13"},{n:"\u6E2D\u5357",g:"109.483933,34.502358|13"},{n:"\u54B8\u9633",g:"108.707509,34.345373|13"},{n:"\u5EF6\u5B89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56DB\u5DDD",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90FD",g:"104.067923,30.679943|12"},{n:"\u963F\u575D\u5DDE",g:"102.228565,31.905763|15"},{n:"\u5DF4\u4E2D",g:"106.757916,31.869189|14"},{n:"\u8FBE\u5DDE",g:"107.494973,31.214199|14"},{n:"\u5FB7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5B5C\u5DDE",g:"101.969232,30.055144|15"},{n:"\u5E7F\u5B89",g:"106.63572,30.463984|13"},{n:"\u5E7F\u5143",g:"105.819687,32.44104|13"},{n:"\u4E50\u5C71",g:"103.760824,29.600958|13"},{n:"\u51C9\u5C71\u5DDE",g:"102.259591,27.892393|14"},{n:"\u6CF8\u5DDE",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5C71",g:"103.84143,30.061115|13"},{n:"\u7EF5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6C5F",g:"105.073056,29.599462|13"},{n:"\u6500\u679D\u82B1",g:"101.722423,26.587571|14"},{n:"\u9042\u5B81",g:"105.564888,30.557491|12"},{n:"\u96C5\u5B89",g:"103.009356,29.999716|13"},{n:"\u5B9C\u5BBE",g:"104.633019,28.769675|13"},{n:"\u8D44\u9633",g:"104.63593,30.132191|13"},{n:"\u81EA\u8D21",g:"104.776071,29.359157|13"}]},{n:"\u897F\u85CF",g:"89.137982,31.367315|6",cities:[{n:"\u62C9\u8428",g:"91.111891,29.662557|13"},{n:"\u963F\u91CC\u5730\u533A",g:"81.107669,30.404557|11"},{n:"\u660C\u90FD\u5730\u533A",g:"97.185582,31.140576|15"},{n:"\u6797\u829D\u5730\u533A",g:"94.349985,29.666941|11"},{n:"\u90A3\u66F2\u5730\u533A",g:"92.067018,31.48068|14"},{n:"\u65E5\u5580\u5219\u5730\u533A",g:"88.891486,29.269023|14"},{n:"\u5C71\u5357\u5730\u533A",g:"91.750644,29.229027|11"}]},{n:"\u65B0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4E4C\u9C81\u6728\u9F50",g:"87.564988,43.84038|12"},{n:"\u963F\u62C9\u5C14",g:"81.291737,40.61568|13"},{n:"\u963F\u514B\u82CF\u5730\u533A",g:"80.269846,41.171731|12"},{n:"\u963F\u52D2\u6CF0\u5730\u533A",g:"88.137915,47.839744|13"},{n:"\u5DF4\u97F3\u90ED\u695E",g:"86.121688,41.771362|12"},{n:"\u535A\u5C14\u5854\u62C9\u5DDE",g:"82.052436,44.913651|11"},{n:"\u660C\u5409\u5DDE",g:"87.296038,44.007058|13"},{n:"\u54C8\u5BC6\u5730\u533A",g:"93.528355,42.858596|13"},{n:"\u548C\u7530\u5730\u533A",g:"79.930239,37.116774|13"},{n:"\u5580\u4EC0\u5730\u533A",g:"75.992973,39.470627|12"},{n:"\u514B\u62C9\u739B\u4F9D",g:"84.88118,45.594331|13"},{n:"\u514B\u5B5C\u52D2\u82CF\u5DDE",g:"76.137564,39.750346|11"},{n:"\u77F3\u6CB3\u5B50",g:"86.041865,44.308259|13"},{n:"\u5854\u57CE\u5730\u533A",g:"82.974881,46.758684|12"},{n:"\u56FE\u6728\u8212\u514B",g:"79.198155,39.889223|13"},{n:"\u5410\u9C81\u756A\u5730\u533A",g:"89.181595,42.96047|13"},{n:"\u4E94\u5BB6\u6E20",g:"87.565449,44.368899|13"},{n:"\u4F0A\u7281\u5DDE",g:"81.297854,43.922248|11"}]},{n:"\u4E91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660E",g:"102.714601,25.049153|12"},{n:"\u4FDD\u5C71",g:"99.177996,25.120489|13"},{n:"\u695A\u96C4\u5DDE",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5DDE",g:"100.223675,25.5969|14"},{n:"\u5FB7\u5B8F\u5DDE",g:"98.589434,24.44124|14"},{n:"\u8FEA\u5E86\u5DDE",g:"99.713682,27.831029|14"},{n:"\u7EA2\u6CB3\u5DDE",g:"103.384065,23.367718|11"},{n:"\u4E3D\u6C5F",g:"100.229628,26.875351|13"},{n:"\u4E34\u6CA7",g:"100.092613,23.887806|14"},{n:"\u6012\u6C5F\u5DDE",g:"98.859932,25.860677|14"},{n:"\u666E\u6D31",g:"100.980058,22.788778|14"},{n:"\u66F2\u9756",g:"103.782539,25.520758|12"},{n:"\u662D\u901A",g:"103.725021,27.340633|13"},{n:"\u6587\u5C71",g:"104.089112,23.401781|14"},{n:"\u897F\u53CC\u7248\u7EB3",g:"100.803038,22.009433|13"},{n:"\u7389\u6EAA",g:"102.545068,24.370447|13"}]},{n:"\u6D59\u6C5F",g:"119.957202,29.159494|8",cities:[{n:"\u676D\u5DDE",g:"120.219375,30.259244|12"},{n:"\u6E56\u5DDE",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91D1\u534E",g:"119.652576,29.102899|12"},{n:"\u4E3D\u6C34",g:"119.929576,28.4563|13"},{n:"\u5B81\u6CE2",g:"121.579006,29.885259|12"},{n:"\u8862\u5DDE",g:"118.875842,28.95691|12"},{n:"\u7ECD\u5174",g:"120.592467,30.002365|13"},{n:"\u53F0\u5DDE",g:"121.440613,28.668283|13"},{n:"\u6E29\u5DDE",g:"120.690635,28.002838|12"},{n:"\u821F\u5C71",g:"122.169872,30.03601|13"}]}],other:[{n:"\u9999\u6E2F",g:"114.186124,22.293586|11"},{n:"\u6FB3\u95E8",g:"113.557519,22.204118|13"},{n:"\u53F0\u6E7E",g:"120.961454,23.80406|8"}]};function bt(i){var t=i.split("|");return t[0]=t[0].split(","),{lng:parseFloat(t[0][0]),lat:parseFloat(t[0][1])}}var Wt={getProvinceNameByCityName:function(t){for(var n=ht.provinces,e=0;e<n.length;e++)for(var a=n[e].n,r=n[e].cities,o=0;o<r.length;o++)if(r[o].n==t)return a;return null},getCenterByCityName:function(t){t=t.replace("\u5E02","");for(var n=0;n<ht.municipalities.length;n++)if(ht.municipalities[n].n==t)return bt(ht.municipalities[n].g);for(var n=0;n<ht.other.length;n++)if(ht.other[n].n==t)return bt(ht.other[n].g);for(var e=ht.provinces,n=0;n<e.length;n++){if(e[n].n==t)return bt(e[n].g);for(var a=e[n].cities,r=0;r<a.length;r++)if(a[r].n==t)return bt(a[r].g)}return null}},Q=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},tt=function(){function i(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}}(),$=function i(t,n,e){t===null&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(a===void 0){var r=Object.getPrototypeOf(t);return r===null?void 0:i(r,n,e)}else{if("value"in a)return a.value;var o=a.get;return o===void 0?void 0:o.call(e)}},it=function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)},nt=function(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i},Ee=function(){function i(t,n){var e=[],a=!0,r=!1,o=void 0;try{for(var s=t[Symbol.iterator](),h;!(a=(h=s.next()).done)&&(e.push(h.value),!(n&&e.length===n));a=!0);}catch(u){r=!0,o=u}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return e}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return i(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function M(i,t){ft.bind(this)(),this._options=t||{},this._data=[],i&&this.add(i)}M.prototype=Object.create(ft.prototype),M.prototype.add=function(i,t){if(Array.isArray(i)){for(var n=0,e=i.length;n<e;n++)if(i[n]){if(i[n].time&&i[n].time.length==14&&i[n].time.substr(0,2)=="20"){var a=i[n].time;i[n].time=new Date(a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2)).getTime()}this._data.push(i[n])}}else if(i instanceof Object)this._data.push(i);else throw new Error("Unknown dataType");this._dataCache=JSON.parse(JSON.stringify(this._data))},M.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},M.prototype.get=function(i){i=i||{};var t=this._data;if(i.filter){for(var n=[],e=0;e<t.length;e++)i.filter(t[e])&&n.push(t[e]);t=n}return i.transferCoordinate&&(t=this.transferCoordinate(t,i.transferCoordinate,i.fromColumn,i.toColumn)),t},M.prototype.set=function(i){this._set(i),this._trigger("change")},M.prototype._set=function(i){this.clear(),this.add(i)},M.prototype.clear=function(i){this._data=[]},M.prototype.remove=function(i){},M.prototype.update=function(i,t){for(var n=this._data,e=0;e<n.length;e++)if(t){var a=!0;for(var r in t)n[e][r]!=t[r]&&(a=!1);a&&i&&i(n[e])}else i&&i(n[e]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},M.prototype.transferCoordinate=function(i,t,n,e){e=e||"_coordinates",n=n||"coordinates";for(var a=0;a<i.length;a++){var r=i[a].geometry,o=r[n];switch(r.type){case"Point":r[e]=t(o);break;case"LineString":for(var h=[],s=0;s<o.length;s++)h.push(t(o[s]));r[e]=h;break;case"MultiLineString":case"Polygon":var h=l(o);r[e]=h;break;case"MultiPolygon":for(var h=[],u=0;u<o.length;u++){var v=o[u],v=l(v);h.push(v)}r[e]=h;break}}function l(c){for(var f=[],p=0;p<c.length;p++){for(var g=c[p],y=[],_=0;_<g.length;_++)y.push(t(g[_]));f.push(y)}return f}return i},M.prototype.initGeometry=function(i){i?this._data.forEach(function(t){t.geometry=i(t)}):this._data.forEach(function(t){if(!t.geometry){if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var n=Wt.getCenterByCityName(t.city);n&&(t.geometry={type:"Point",coordinates:[n.lng,n.lat]})}}})},M.prototype.getMax=function(i){var t=this._data;if(!(!t||t.length<=0)){for(var n=parseFloat(t[0][i]),e=1;e<t.length;e++){var a=parseFloat(t[e][i]);a>n&&(n=a)}return n}},M.prototype.getSum=function(i){var t=this._data;if(!(!t||t.length<=0)){for(var n=0,e=0;e<t.length;e++)t[e][i]&&(n+=parseFloat(t[e][i]));return n}},M.prototype.getMin=function(i){var t=this._data;if(!(!t||t.length<=0)){for(var n=parseFloat(t[0][i]),e=1;e<t.length;e++){var a=parseFloat(t[e][i]);a<n&&(n=a)}return n}},M.prototype.getUnique=function(i){var e=this._data;if(!(!e||e.length<=0)){for(var t={},n=1;n<e.length;n++)t[e[n][i]]=!0;var e=[];for(var a in t)e.push(a);return e}};function Le(i,t,n){var e=60*n+30,a=Math.PI/180*e;return[i.x+t*Math.cos(a),i.y+t*Math.sin(a)]}function Me(i,t,n,e){for(var a=0;a<6;a++){var r=Le({x:t,y:n},e,a);i.lineTo(r[0],r[1])}}var ct={drawDataSet:function(t,n,e){for(var a=n instanceof M?n.get():n,r=0,o=a.length;r<o;r++){var s=a[r];this.draw(t,s,e)}},draw:function(t,n,e){var a=n.geometry.type,r=n.geometry._coordinates||n.geometry.coordinates,o=n.symbol||e.symbol||"circle";switch(a){case"Point":var s=n._size||n.size||e._size||e.size||5;o==="circle"?(e.bigData==="Point"&&t.moveTo(r[0],r[1]),t.arc(r[0],r[1],s,0,Math.PI*2)):o==="rect"?t.rect(r[0]-s/2,r[1]-s/2,s,s):o==="honeycomb"&&Me(t,r[0],r[1],s);break;case"LineString":this.drawLineString(t,r);break;case"MultiLineString":for(var h=0;h<r.length;h++){var u=r[h];this.drawLineString(t,u)}break;case"Polygon":this.drawPolygon(t,r);break;case"MultiPolygon":for(var h=0;h<r.length;h++){var v=r[h];if(this.drawPolygon(t,v),e.multiPolygonDraw){var l=e.multiPolygonDraw();if(l)return l}}break;default:console.error("type"+a+"is not support now!");break}},drawLineString:function(t,n){for(var e=0;e<n.length;e++){var a=n[e][0],r=n[e][1];e==0?t.moveTo(a,r):t.lineTo(a,r)}},drawPolygon:function(t,n){t.beginPath();for(var e=0;e<n.length;e++){var a=n[e];t.moveTo(a[0][0],a[0][1]);for(var r=1;r<a.length;r++)t.lineTo(a[r][0],a[r][1]);t.lineTo(a[0][0],a[0][1]),t.closePath()}}},$t={draw:function(t,n,e){var a=n instanceof M?n.get():n;t.save();for(var r in e)t[r]=e[r];if(e.bigData){t.save(),t.beginPath();for(var o=0,s=a.length;o<s;o++){var h=a[o];ct.draw(t,h,e)}var u=e.bigData;u=="Point"||u=="Polygon"||u=="MultiPolygon"?(t.fill(),t.lineDash&&t.setLineDash(t.lineDash),h.lineDash&&t.setLineDash(h.lineDash),(h.strokeStyle||e.strokeStyle)&&e.lineWidth&&t.stroke()):(u=="LineString"||u=="MultiLineString")&&t.stroke(),t.restore()}else for(var o=0,s=a.length;o<s;o++){var h=a[o];t.save(),(h.fillStyle||h._fillStyle)&&(t.fillStyle=h.fillStyle||h._fillStyle),(h.strokeStyle||h._strokeStyle)&&(t.strokeStyle=h.strokeStyle||h._strokeStyle),t.lineDash&&t.setLineDash(t.lineDash),h.lineDash&&t.setLineDash(h.lineDash);var u=h.geometry.type;t.beginPath(),e.multiPolygonDraw=function(){t.fill(),(h.strokeStyle||e.strokeStyle)&&e.lineWidth&&t.stroke()},ct.draw(t,h,e),u=="Point"||u=="Polygon"||u=="MultiPolygon"?(t.fill(),(h.strokeStyle||e.strokeStyle)&&e.lineWidth&&t.stroke()):(u=="LineString"||u=="MultiLineString")&&((h.lineWidth||h._lineWidth)&&(t.lineWidth=h.lineWidth||h._lineWidth),t.stroke()),t.restore()}t.restore()}};function Ct(i,t){var n;if(typeof document!="undefined"){var n=document.createElement("canvas");i&&(n.width=i),t&&(n.height=t)}return n}function V(i){i=i||{},this.gradient=i.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=i.maxSize||35,this.minSize=i.minSize||0,this.max=i.max||100,this.min=i.min||0,this.initPalette()}V.prototype.setMax=function(i){this.max=i||100},V.prototype.setMin=function(i){this.min=i||0},V.prototype.setMaxSize=function(i){this.maxSize=i||35},V.prototype.setMinSize=function(i){this.minSize=i||0},V.prototype.initPalette=function(){var i=this.gradient,t=new Ct(256,1),n=this.paletteCtx=t.getContext("2d"),e=n.createLinearGradient(0,0,256,1);for(var a in i)e.addColorStop(parseFloat(a),i[a]);n.fillStyle=e,n.fillRect(0,0,256,1)},V.prototype.getColor=function(i){var t=this.getImageData(i);return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]/256+")"},V.prototype.getImageData=function(i){var t=this.paletteCtx.getImageData(0,0,256,1).data;if(i===void 0)return t;var n=this.max,e=this.min;i>n&&(i=n),i<e&&(i=e);var a=Math.floor((i-e)/(n-e)*(256-1))*4;return[t[a],t[a+1],t[a+2],t[a+3]]},V.prototype.getSize=function(i){var t=0,n=this.max,e=this.min,a=this.maxSize,r=this.minSize;if(i>n&&(i=n),i<e&&(i=e),n>e)t=r+(i-e)/(n-e)*(a-r);else return a;return t},V.prototype.getLegend=function(i){var t=this.gradient,n=i.width||20,e=i.height||180,a=new Ct(n,e),r=a.getContext("2d"),o=r.createLinearGradient(0,e,0,0);for(var s in t)o.addColorStop(parseFloat(s),t[s]);return r.fillStyle=o,r.fillRect(0,0,n,e),a};var Se=typeof window=="undefined"?{}:window,Vt=Se.devicePixelRatio||1;function Pe(i){var t=i/2,n=i+t,e=1e4,a=new Ct(n*2,n*2),r=a.getContext("2d");return r.shadowBlur=t,r.shadowColor="black",r.shadowOffsetX=r.shadowOffsetY=e,r.beginPath(),r.arc(n-e,n-e,i,0,Math.PI*2,!0),r.closePath(),r.fill(),a}function ke(i,t,n){var e=Gt(n),a=qt(n),r=e-a,v=n.range||null,o=0,s=1024;v&&v.length===2&&(o=(v[0]-a)/r*1024),v&&v.length===2&&(s=(v[1]-a)/r*1024);for(var h=n.maxOpacity||.8,u=n.minOpacity||0,v=n.range,l=3,c=i.length,f;l<c;l+=4)f=i[l]*4,i[l]/256>h&&(i[l]=256*h),i[l]/256<u&&(i[l]=256*u),f&&f>=o&&f<=s?(i[l-3]=t[f],i[l-2]=t[f+1],i[l-1]=t[f+2]):i[l]=0}function Gt(i){var t=i.max||100;return t}function qt(i){var t=i.min||0;return t}function Oe(i,t,n){var e=Gt(n),a=qt(n),r=n._size;r==null&&(r=n.size,r==null&&(r=13));var o=new V({gradient:n.gradient,max:e,min:a}),s=Pe(r),h=s.width/2,u=s.height/2,v=t,l={};v.forEach(function(p,g){var y=p.count===void 0?1:p.count,_=Math.min(1,y/e).toFixed(2);l[_]=l[_]||[],l[_].push(p)});for(var c in l)if(!isNaN(c)){var f=l[c];i.beginPath(),n.withoutAlpha||(i.globalAlpha=c),i.strokeStyle=o.getColor(c*e),f.forEach(function(p,g){if(!!p.geometry){var y=p.geometry._coordinates||p.geometry.coordinates,_=p.geometry.type;if(_==="Point"){var w=p.count===void 0?1:p.count;i.globalAlpha=w/e,i.drawImage(s,y[0]-h,y[1]-u)}else if(_==="LineString"){var w=p.count===void 0?1:p.count;i.globalAlpha=w/e,i.beginPath(),ct.draw(i,p,n),i.stroke()}}})}}function Ie(i,t,n){if(!(i.canvas.width<=0||i.canvas.height<=0)){var e=n.strength||.3;i.strokeStyle="rgba(0,0,0,"+e+")";var a=new Ct(i.canvas.width,i.canvas.height),r=a.getContext("2d");r.scale(Vt,Vt),n=n||{};var o=t instanceof M?t.get():t;i.save();var s=new V({gradient:n.gradient});if(Oe(r,o,n),!n.absolute){var h=r.getImageData(0,0,i.canvas.width,i.canvas.height);ke(h.data,s.getImageData(),n),i.putImageData(h,0,0),i.restore()}s=null,a=null}}var Yt={draw:Ie},Jt={draw:function(t,n,e){t.save();var a=n instanceof M?n.get():n,r={},o=e._size||e.size||50,s="enableCluster"in e?e.enableCluster:!0,h=e.offset||{x:0,y:0},u=new V({min:e.min||0,max:e.max||100,gradient:e.gradient});if(s){for(var p=0;p<a.length;p++){var l=a[p].geometry._coordinates||a[p].geometry.coordinates,c=Math.floor((l[0]-h.x)/o)+","+Math.floor((l[1]-h.y)/o);r[c]||(r[c]=0),r[c]+=~~(a[p].count||1)}for(var g in r)g=g.split(","),t.beginPath(),t.rect(g[0]*o+.5+h.x,g[1]*o+.5+h.y,o,o),t.fillStyle=u.getColor(r[g]),t.fill(),e.strokeStyle&&e.lineWidth&&t.stroke()}else{for(var v=0;v<a.length;v++){var l=a[v].geometry._coordinates||a[v].geometry.coordinates,c=l.join(",");r[c]=a[v].count||1}for(var f in r)f=f.split(","),t.beginPath(),t.rect(+f[0]-o/2,+f[1]-o/2,o,o),t.fillStyle=u.getColor(r[f]),t.fill(),e.strokeStyle&&e.lineWidth&&t.stroke()}if(e.label&&e.label.show!==!1){t.fillStyle=e.label.fillStyle||"white",e.label.font&&(t.font=e.label.font),e.label.shadowColor&&(t.shadowColor=e.label.shadowColor),e.label.shadowBlur&&(t.shadowBlur=e.label.shadowBlur);for(var c in r){c=c.split(",");var y=r[c],_=t.measureText(y).width;s?t.fillText(y,c[0]*o+.5+h.x+o/2-_/2,c[1]*o+.5+h.y+o/2+5):t.fillText(y,+c[0]-_/2,+c[1]+5)}}t.restore()}};function ze(i,t,n){var e=60*n+30,a=Math.PI/180*e;return[i.x+t*Math.cos(a),i.y+t*Math.sin(a)]}var jt={draw:function(t,n,e){t.save();var a=n instanceof M?n.get():n;for(var r in e)t[r]=e[r];var o=e.offset||{x:10,y:10},s=e._size||e.size||40;s=s/2/Math.sin(Math.PI/3);for(var h=s*2*Math.sin(Math.PI/3),u=s*1.5,v={},l=0;l<a.length;l++){var c=a[l].geometry._coordinates||a[l].geometry.coordinates,f=(c[1]-o.y)/u,p=Math.round(f),g=(c[0]-o.x)/h-(p&1?.5:0),y=Math.round(g),_=f-p;if(Math.abs(_)*3>1){var w=g-y,E=y+(g<y?-1:1)/2,x=p+(f<p?-1:1),b=g-E,z=f-x;w*w+_*_>b*b+z*z&&(y=E+(p&1?1:-1)/2,p=x)}var B=y+"-"+p,I=v[B];I?I.push(a[l]):(I=v[B]=[a[l]],I.i=y,I.j=p,I.x=(y+(p&1?1/2:0))*h,I.y=p*u)}var S=new V({max:e.max||100,maxSize:s,gradient:e.gradient});for(var r in v){var W=v[r];t.beginPath();for(var U=0;U<6;U++){var N=ze({x:W.x+o.x,y:W.y+o.y},s,U);t.lineTo(N[0],N[1])}t.closePath();for(var j=0,l=0;l<W.length;l++)j+=W[l].count||1;W.count=j,t.fillStyle=S.getColor(j),t.fill(),e.strokeStyle&&e.lineWidth&&t.stroke()}if(e.label&&e.label.show!==!1){t.fillStyle=e.label.fillStyle||"white",e.label.font&&(t.font=e.label.font),e.label.shadowColor&&(t.shadowColor=e.label.shadowColor),e.label.shadowBlur&&(t.shadowBlur=e.label.shadowBlur);for(var r in v){var W=v[r],X=W.count;X<0?X=X.toFixed(2):X=~~X;var xt=t.measureText(X).width;t.fillText(X,W.x+o.x-xt/2,W.y+o.y+5)}}t.restore()}};function Xt(i,t,n){var e=i.createShader(n);return i.shaderSource(e,t),i.compileShader(e),e}function kt(i,t,n){var e=Xt(i,t,i.VERTEX_SHADER),a=Xt(i,n,i.FRAGMENT_SHADER),r=i.createProgram();return i.attachShader(r,e),i.attachShader(r,a),i.linkProgram(r),i.useProgram(r),r}function Ot(i){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=1,t.height=1,n.fillStyle=i,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}var Re=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),Ae=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function Te(i,t,n){if(!!t){var e=kt(i,Re,Ae);i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE),i.clear(i.COLOR_BUFFER_BIT);var a=i.canvas.width/2,r=i.canvas.height/2,o=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,o);var s=i.getAttribLocation(e,"a_Position");i.vertexAttribPointer(s,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(s);var h=i.getUniformLocation(e,"u_FragColor"),u=Ot(n.strokeStyle||"red");i.uniform4f(h,u[0]/255,u[1]/255,u[2]/255,u[3]/255),i.lineWidth(n.lineWidth||1);for(var v=0,l=t.length;v<l;v++){for(var c=t[v].geometry._coordinates,f=[],p=0;p<c.length;p++){var g=c[p],y=(g[0]-a)/a,_=(r-g[1])/r;f.push(y,_)}var w=new Float32Array(f);i.bufferData(i.ARRAY_BUFFER,w,i.STATIC_DRAW),i.drawArrays(i.LINE_STRIP,0,c.length)}}}var Kt={draw:Te},De=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),Fe=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function Be(i,t,n){if(!!t){var e=kt(i,De,Fe),a=i.getAttribLocation(e,"a_Position"),r=i.getAttribLocation(e,"a_PointSize"),o=i.getUniformLocation(e,"u_FragColor");i.clear(i.COLOR_BUFFER_BIT);for(var s=i.canvas.width/2,h=i.canvas.height/2,u=[],v=0,l=0;l<t.length;l++){var c=t[l].geometry._coordinates,f=(c[0]-s)/s,p=(h-c[1])/h;f<-1||f>1||p<-1||p>1||(u.push(f,p),v++)}var g=new Float32Array(u),y=v,_=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,_),i.bufferData(i.ARRAY_BUFFER,g,i.STATIC_DRAW),i.vertexAttribPointer(a,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(a),i.vertexAttrib1f(r,n._size);var w=Ot(n.fillStyle||"red");i.uniform4f(o,w[0]/255,w[1]/255,w[2]/255,w[3]/255),i.drawArrays(i.POINTS,0,y)}}var Qt={draw:Be};function Et(i,t,n){n=n||2;var e=t&&t.length,a=e?t[0]*n:i.length,r=te(i,0,a,n,!0),o=[];if(!r)return o;var s,h,u,v,l,c,f;if(e&&(r=We(i,t,r,n)),i.length>80*n){s=u=i[0],h=v=i[1];for(var p=n;p<a;p+=n)l=i[p],c=i[p+1],l<s&&(s=l),c<h&&(h=c),l>u&&(u=l),c>v&&(v=c);f=Math.max(u-s,v-h)}return pt(r,o,n,s,h,f),o}function te(i,t,n,e,a){var r,o;if(a===Rt(i,t,n,e)>0)for(r=t;r<n;r+=e)o=ae(r,i[r],i[r+1],o);else for(r=n-e;r>=t;r-=e)o=ae(r,i[r],i[r+1],o);return o&&ut(o,o.next)&&(mt(o),o=o.next),o}function dt(i,t){if(!i)return i;t||(t=i);var n=i,e;do if(e=!1,!n.steiner&&(ut(n,n.next)||G(n.prev,n,n.next)===0)){if(mt(n),n=t=n.prev,n===n.next)return null;e=!0}else n=n.next;while(e||n!==t);return t}function pt(i,t,n,e,a,r,o){if(!!i){!o&&r&&qe(i,e,a,r);for(var s=i,h,u;i.prev!==i.next;){if(h=i.prev,u=i.next,r?Ze(i,e,a,r):Ue(i)){t.push(h.i/n),t.push(i.i/n),t.push(u.i/n),mt(i),i=u.next,s=u.next;continue}if(i=u,i===s){o?o===1?(i=Ne(i,t,n),pt(i,t,n,e,a,r,2)):o===2&&He(i,t,n,e,a,r):pt(dt(i),t,n,e,a,r,1);break}}}}function Ue(i){var t=i.prev,n=i,e=i.next;if(G(t,n,e)>=0)return!1;for(var a=i.next.next;a!==i.prev;){if(Lt(t.x,t.y,n.x,n.y,e.x,e.y,a.x,a.y)&&G(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Ze(i,t,n,e){var a=i.prev,r=i,o=i.next;if(G(a,r,o)>=0)return!1;for(var s=a.x<r.x?a.x<o.x?a.x:o.x:r.x<o.x?r.x:o.x,h=a.y<r.y?a.y<o.y?a.y:o.y:r.y<o.y?r.y:o.y,u=a.x>r.x?a.x>o.x?a.x:o.x:r.x>o.x?r.x:o.x,v=a.y>r.y?a.y>o.y?a.y:o.y:r.y>o.y?r.y:o.y,l=It(s,h,t,n,e),c=It(u,v,t,n,e),f=i.nextZ;f&&f.z<=c;){if(f!==i.prev&&f!==i.next&&Lt(a.x,a.y,r.x,r.y,o.x,o.y,f.x,f.y)&&G(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=i.prevZ;f&&f.z>=l;){if(f!==i.prev&&f!==i.next&&Lt(a.x,a.y,r.x,r.y,o.x,o.y,f.x,f.y)&&G(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Ne(i,t,n){var e=i;do{var a=e.prev,r=e.next.next;!ut(a,r)&&ee(a,e,e.next,r)&&gt(a,r)&&gt(r,a)&&(t.push(a.i/n),t.push(e.i/n),t.push(r.i/n),mt(e),mt(e.next),e=i=r),e=e.next}while(e!==i);return e}function He(i,t,n,e,a,r){var o=i;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&je(o,s)){var h=ne(o,s);o=dt(o,o.next),h=dt(h,h.next),pt(o,t,n,e,a,r),pt(h,t,n,e,a,r);return}s=s.next}o=o.next}while(o!==i)}function We(i,t,n,e){var a=[],r,o,s,h,u;for(r=0,o=t.length;r<o;r++)s=t[r]*e,h=r<o-1?t[r+1]*e:i.length,u=te(i,s,h,e,!1),u===u.next&&(u.steiner=!0),a.push(Je(u));for(a.sort($e),r=0;r<a.length;r++)Ve(a[r],n),n=dt(n,n.next);return n}function $e(i,t){return i.x-t.x}function Ve(i,t){if(t=Ge(i,t),t){var n=ne(t,i);dt(n,n.next)}}function Ge(i,t){var n=t,e=i.x,a=i.y,r=-1/0,o;do{if(a<=n.y&&a>=n.next.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=e&&s>r){if(r=s,s===e){if(a===n.y)return n;if(a===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(e===r)return o.prev;var h=o,u=o.x,v=o.y,l=1/0,c;for(n=o.next;n!==h;)e>=n.x&&n.x>=u&&Lt(a<v?e:r,a,u,v,a<v?r:e,a,n.x,n.y)&&(c=Math.abs(a-n.y)/(e-n.x),(c<l||c===l&&n.x>o.x)&&gt(n,i)&&(o=n,l=c)),n=n.next;return o}function qe(i,t,n,e){var a=i;do a.z===null&&(a.z=It(a.x,a.y,t,n,e)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,Ye(a)}function Ye(i){var t,n,e,a,r,o,s,h,u=1;do{for(n=i,i=null,r=null,o=0;n;){for(o++,e=n,s=0,t=0;t<u&&(s++,e=e.nextZ,!!e);t++);for(h=u;s>0||h>0&&e;)s===0?(a=e,e=e.nextZ,h--):h===0||!e||n.z<=e.z?(a=n,n=n.nextZ,s--):(a=e,e=e.nextZ,h--),r?r.nextZ=a:i=a,a.prevZ=r,r=a;n=e}r.nextZ=null,u*=2}while(o>1);return i}function It(i,t,n,e,a){return i=32767*(i-n)/a,t=32767*(t-e)/a,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function Je(i){var t=i,n=i;do t.x<n.x&&(n=t),t=t.next;while(t!==i);return n}function Lt(i,t,n,e,a,r,o,s){return(a-o)*(t-s)-(i-o)*(r-s)>=0&&(i-o)*(e-s)-(n-o)*(t-s)>=0&&(n-o)*(r-s)-(a-o)*(e-s)>=0}function je(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!Xe(i,t)&&gt(i,t)&&gt(t,i)&&Ke(i,t)}function G(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function ut(i,t){return i.x===t.x&&i.y===t.y}function ee(i,t,n,e){return ut(i,t)&&ut(n,e)||ut(i,e)&&ut(n,t)?!0:G(i,t,n)>0!=G(i,t,e)>0&&G(n,e,i)>0!=G(n,e,t)>0}function Xe(i,t){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==t.i&&n.next.i!==t.i&&ee(n,n.next,i,t))return!0;n=n.next}while(n!==i);return!1}function gt(i,t){return G(i.prev,i,i.next)<0?G(i,t,i.next)>=0&&G(i,i.prev,t)>=0:G(i,t,i.prev)<0||G(i,i.next,t)<0}function Ke(i,t){var n=i,e=!1,a=(i.x+t.x)/2,r=(i.y+t.y)/2;do n.y>r!=n.next.y>r&&a<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(e=!e),n=n.next;while(n!==i);return e}function ne(i,t){var n=new zt(i.i,i.x,i.y),e=new zt(t.i,t.x,t.y),a=i.next,r=t.prev;return i.next=t,t.prev=i,n.next=a,a.prev=n,e.next=n,n.prev=e,r.next=e,e.prev=r,e}function ae(i,t,n,e){var a=new zt(i,t,n);return e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a),a}function mt(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function zt(i,t,n){this.i=i,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Et.deviation=function(i,t,n,e){var a=t&&t.length,r=a?t[0]*n:i.length,o=Math.abs(Rt(i,0,r,n));if(a)for(var s=0,h=t.length;s<h;s++){var u=t[s]*n,v=s<h-1?t[s+1]*n:i.length;o-=Math.abs(Rt(i,u,v,n))}var l=0;for(s=0;s<e.length;s+=3){var c=e[s]*n,f=e[s+1]*n,p=e[s+2]*n;l+=Math.abs((i[c]-i[p])*(i[f+1]-i[c+1])-(i[c]-i[f])*(i[p+1]-i[c+1]))}return o===0&&l===0?0:Math.abs((l-o)/o)};function Rt(i,t,n,e){for(var a=0,r=t,o=n-e;r<n;r+=e)a+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return a}Et.flatten=function(i){for(var t=i[0][0].length,n={vertices:[],holes:[],dimensions:t},e=0,a=0;a<i.length;a++){for(var r=0;r<i[a].length;r++)for(var o=0;o<t;o++)n.vertices.push(i[a][r][o]);a>0&&(e+=i[a-1].length,n.holes.push(e))}return n};var Qe=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),tn=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function en(i,t,n){if(!!t){i.clear(i.COLOR_BUFFER_BIT),i.viewport(0,0,i.canvas.width,i.canvas.height);var e=kt(i,Qe,tn);i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE);var a=i.canvas.width/2,r=i.canvas.height/2;i.bindBuffer(i.ARRAY_BUFFER,i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,i.createBuffer());var o=i.getAttribLocation(e,"a_Position");i.vertexAttribPointer(o,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(o);var s=i.getUniformLocation(e,"u_FragColor"),h=Ot(n.fillStyle||"red");i.uniform4f(s,h[0]/255,h[1]/255,h[2]/255,h[3]/255),i.lineWidth(n.lineWidth||1);for(var u=[],v=[],l=65536,c=0,f=0,p=t.length;f<p;f++){var g=Et.flatten(t[f].geometry._coordinates||t[f].geometry.coordinates),y=g.vertices;c=u.length/2;for(var _=0;_<y.length;_+=2)y[_]=(y[_]-a)/a,y[_+1]=(r-y[_+1])/r;(u.length+y.length)/2>l&&(i.bufferData(i.ARRAY_BUFFER,new Float32Array(u),i.STATIC_DRAW),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(v),i.STATIC_DRAW),i.drawElements(i.TRIANGLES,v.length,i.UNSIGNED_SHORT,0),u.length=0,v.length=0,c=0);for(var _=0;_<y.length;_++)u.push(y[_]);for(var w=Et(y,g.holes,g.dimensions),_=0;_<w.length;_++)v.push(w[_]+c)}i.bufferData(i.ARRAY_BUFFER,new Float32Array(u),i.STATIC_DRAW),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(v),i.STATIC_DRAW),i.drawElements(i.TRIANGLES,v.length,i.UNSIGNED_SHORT,0),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}}var ie={draw:en},re={draw:function(t,n,e){var a=n instanceof M?n.get():n;a.length>0&&(a[0].geometry.type=="LineString"?Kt.draw(t,a,e):a[0].geometry.type=="Polygon"||a[0].geometry.type=="MultiPolygon"?ie.draw(t,a,e):Qt.draw(t,a,e))}};function nn(i,t){t=t||{};for(var n=[],e=0;e<i.length-1;e++){var a=an(i[e],i[e+1],t.count);a&&a.length>0&&(n=n.concat(a))}return n}function an(i,t,s){if(!i||!t)return null;var e=function(S){return 1-2*S+S*S},a=function(S){return 2*S-2*S*S},r=function(S){return S*S},o=[],s=s||40,h,u,v,l,c,f,p=0,g=0;if(typeof t=="undefined"){typeof o!="undefined"&&(o=[]);return}var y=parseFloat(i.lat),_=parseFloat(t.lat),w=parseFloat(i.lng),E=parseFloat(t.lng);for(E>w&&parseFloat(E-w)>180&&w<0&&(w=parseFloat(180+180+w),E=parseFloat(180+180+E)),f=0,_==y?(h=0,u=w-E):E==w?(h=Math.PI/2,u=y-_):(h=Math.atan((_-y)/(E-w)),u=(_-y)/Math.sin(h)),f==0&&(f=h+Math.PI/5),v=u/2,c=v*Math.cos(f)+w,l=v*Math.sin(f)+y,p=0;p<s+1;p++){var x=w*e(g)+c*a(g)+E*r(g),b=y*e(g)+l*a(g)+_*r(g),z=i.lng,B=t.lng;o.push([z<0&&B>0?x-360:x,b]),g=g+1/s}return o}var rn={getPoints:nn},on=function(){var t={},n=[],e=[],a=[],r=.1,o=.1,s=1,h=2,u=6,v=70,l=.6666667,c=.6,f=1e-8;function p(d,m){return d.x*m.x+d.y*m.y}function g(d){return{x:t[d.target].x-t[d.source].x,y:t[d.target].y-t[d.source].y}}function y(d){return Math.sqrt(Math.pow(t[d.source].x-t[d.target].x,2)+Math.pow(t[d.source].y-t[d.target].y,2))}function _(d){return Math.sqrt(Math.pow(d.source.x-d.target.x,2)+Math.pow(d.source.y-d.target.y,2))}function w(d){var m=(t[d.source].x+t[d.target].x)/2,C=(t[d.source].y+t[d.target].y)/2;return{x:m,y:C}}function E(d){for(var m=0,C=1;C<a[d].length;C++){var O=x(a[d][C],a[d][C-1]);m+=O}return m}function x(d,m){return Math.sqrt(Math.pow(d.x-m.x,2)+Math.pow(d.y-m.y,2))}function b(d,m){var C=Math.sqrt((m.target.x-m.source.x)*(m.target.x-m.source.x)+(m.target.y-m.source.y)*(m.target.y-m.source.y)),O=((m.source.y-d.y)*(m.source.y-m.target.y)-(m.source.x-d.x)*(m.target.x-m.source.x))/(C*C);return{x:m.source.x+O*(m.target.x-m.source.x),y:m.source.y+O*(m.target.y-m.source.y)}}function z(){for(var d=0;d<n.length;d++)a[d]=[]}function B(){for(var d=0;d<n.length;d++)e[d]=[]}function I(d){for(var m=[],C=0;C<d.length;C++)t[d[C].source].x!=t[d[C].target].x&&t[d[C].source].y!=t[d[C].target].y&&m.push(d[C]);return m}function S(d,m,C){var O=a[d][m-1],D=a[d][m+1],A=a[d][m],R=O.x-A.x+D.x-A.x,H=O.y-A.y+D.y-A.y;return R*=C,H*=C,{x:R,y:H}}function W(d,m,C){for(var O={x:0,y:0},D=e[d],A=0;A<D.length;A++){var R={x:a[D[A]][m].x-a[d][m].x,y:a[D[A]][m].y-a[d][m].y};if(Math.abs(R.x)>f||Math.abs(R.y)>f){var H=1/Math.pow(_({source:a[D[A]][m],target:a[d][m]}),1);O.x+=R.x*H,O.y+=R.y*H}}return O}function U(d,m,C){for(var O=r/(y(n[d])*(m+1)),D=[{x:0,y:0}],A=1;A<m+1;A++){var R={x:0,y:0},H=S(d,A,O),et=W(d,A);R.x=C*(H.x+et.x),R.y=C*(H.y+et.y),D.push(R)}return D.push({x:0,y:0}),D}function N(d){for(var m=0;m<n.length;m++)if(d==1)a[m].push(t[n[m].source]),a[m].push(w(n[m])),a[m].push(t[n[m].target]);else{var C=E(m),O=C/(d+1),D=O,A=[];A.push(t[n[m].source]);for(var R=1;R<a[m].length;R++){for(var H=x(a[m][R],a[m][R-1]);H>D;){var et=D/H,st=a[m][R-1].x,we=a[m][R-1].y;st+=et*(a[m][R].x-a[m][R-1].x),we+=et*(a[m][R].y-a[m][R-1].y),A.push({x:st,y:we}),H-=D,D=O}D-=H}A.push(t[n[m].target]),a[m]=A}}function j(d,m){var C=Math.abs(p(g(d),g(m))/(y(d)*y(m)));return C}function X(d,m){var C=(y(d)+y(m))/2,O=2/(C/Math.min(y(d),y(m))+Math.max(y(d),y(m))/C);return O}function xt(d,m){var C=(y(d)+y(m))/2,O={x:(t[d.source].x+t[d.target].x)/2,y:(t[d.source].y+t[d.target].y)/2},D={x:(t[m.source].x+t[m.target].x)/2,y:(t[m.source].y+t[m.target].y)/2},A=C/(C+x(O,D));return A}function vt(d,m){var C=b(t[m.source],{source:t[d.source],target:t[d.target]}),O=b(t[m.target],{source:t[d.source],target:t[d.target]}),D={x:(C.x+O.x)/2,y:(C.y+O.y)/2},A={x:(t[d.source].x+t[d.target].x)/2,y:(t[d.source].y+t[d.target].y)/2},R=Math.max(0,1-2*x(A,D)/x(C,O));return R}function Gn(d,m){return Math.min(vt(d,m),vt(m,d))}function qn(d,m){var C=j(d,m)*X(d,m)*xt(d,m)*Gn(d,m);return C}function Yn(d,m){return qn(d,m)>=c}function Jn(){for(var d=0;d<n.length-1;d++)for(var m=d+1;m<n.length;m++)d!=m&&Yn(n[d],n[m])&&(e[d].push(m),e[m].push(d))}var Z=function(){var m=o,C=v,O=s;z(),B(),N(O),Jn();for(var D=0;D<u;D++){for(var A=0;A<C;A++){for(var R=[],H=0;H<n.length;H++)R[H]=U(H,O,m);for(var et=0;et<n.length;et++)for(var st=0;st<O+1;st++)a[et][st].x+=R[et][st].x,a[et][st].y+=R[et][st].y}m=m/2,O=O*2,C=l*C,N(O)}return a};return Z.nodes=function(d){return arguments.length==0?t:(t=d,Z)},Z.edges=function(d){return arguments.length==0?n:(n=I(d),Z)},Z.bundling_stiffness=function(d){return arguments.length==0?r:(r=d,Z)},Z.step_size=function(d){return arguments.length==0?o:(o=d,Z)},Z.cycles=function(d){return arguments.length==0?u:(u=d,Z)},Z.iterations=function(d){return arguments.length==0?v:(v=d,Z)},Z.iterations_rate=function(d){return arguments.length==0?l:(l=d,Z)},Z.subdivision_points_seed=function(d){return arguments.length==0?P:(P=d,Z)},Z.subdivision_rate=function(d){return arguments.length==0?h:(h=d,Z)},Z.compatbility_threshold=function(d){return arguments.length==0?compatbility_threshold:(c=d,Z)},Z};function yt(i){this.splitList=i||{other:1}}yt.prototype.get=function(i){var t=this.splitList,n=t.other;for(var e in t)if(i==e){n=t[e];break}return n},yt.prototype.generateByDataSet=function(i,t){var n=t||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],e=i.get();this.splitList={};for(var a=0,r=0;r<e.length&&(this.splitList[e[r].count]===void 0&&(this.splitList[e[r].count]=n[a],a++),!(a>=n.length-1));r++);this.splitList.other=n[n.length-1]},yt.prototype.getLegend=function(i){var t=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var e="";for(var a in t)e+='<div style="line-height: 19px;" value="'+a+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+t[a]+';"></span><span style="margin-left: 3px;">'+a+"<span></div>";return n.innerHTML=e,n};function lt(i){this.splitList=i||[{start:0,value:"red"}]}lt.prototype.get=function(i){for(var t=this.splitList,n=!1,e=0;e<t.length;e++)if((t[e].start===void 0||t[e].start!==void 0&&i>=t[e].start)&&(t[e].end===void 0||t[e].end!==void 0&&i<t[e].end)){n=t[e].value;break}return n},lt.prototype.generateByDataSet=function(i){var t=i.getMin("count"),n=i.getMax("count");this.generateByMinMax(t,n)},lt.prototype.generateByMinMax=function(i,t){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],e=Number((t-i)/7);t=Number(t);var a=Number(i);this.splitList=[];for(var r=0;a<t;)this.splitList.push({start:a,end:a+e,value:n[r]}),r++,a+=e},lt.prototype.getLegend=function(i){this.splitList};var sn=function(){function i(t,n,e){if(Q(this,i),!t||!n)return console.warn("id \u548C type \u4E3A\u5FC5\u586B\u9879"),!1;if(n=="baidu"){if(!BMap)return console.warn("\u8BF7\u5148\u5F15\u5165\u767E\u5EA6\u5730\u56FEJS API"),!1}else console.warn("\u6682\u4E0D\u652F\u6301\u4F60\u7684\u5730\u56FE\u7C7B\u578B");this.type=n;var a=e&&e.center?e.center:[106.962497,38.208726],r=e&&e.zoom?e.zoom:5,o=this.map=new BMap.Map(t,{enableMapClick:!1});o.centerAndZoom(new BMap.Point(a[0],a[1]),r),o.enableScrollWheelZoom(!0),o.setMapStyle({style:"light"})}return tt(i,[{key:"addLayer",value:function(n,e){if(this.type=="baidu")return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),i}();function K(i){this.options=i||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=i.map,this._lastDrawTime=null,this.show()}var At=typeof window=="undefined"?{}:window,oe=At.BMap||At.BMapGL;oe&&(K.prototype=new oe.Overlay,K.prototype.initialize=function(i){this._map=i;var t=this.canvas=document.createElement("canvas");t.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",t.style.mixBlendMode=this.mixBlendMode,this.adjustSize();var n=i.getPanes()[this.paneName];n||(n=i.getPanes().floatShadow),n.appendChild(t);var e=this;return i.addEventListener("resize",function(){e.adjustSize(),e._draw()}),i.addEventListener("update",function(){e._draw()}),this.options.updateImmediate&&setTimeout(function(){e._draw()},100),this.canvas},K.prototype.adjustSize=function(){var i=this._map.getSize(),t=this.canvas,n=this.devicePixelRatio=At.devicePixelRatio||1;t.width=i.width*n,t.height=i.height*n,this.context=="2d"&&t.getContext(this.context).scale(n,n),t.style.width=i.width+"px",t.style.height=i.height+"px"},K.prototype.draw=function(){var i=this;this.options.updateImmediate?i._draw():(clearTimeout(i.timeoutID),i.timeoutID=setTimeout(function(){i._draw()},15))},K.prototype._draw=function(){var i=this._map,t=i.getSize(),n=i.getCenter();if(n){var e=i.pointToOverlayPixel(n);this.canvas.style.left=e.x-t.width/2+"px",this.canvas.style.top=e.y-t.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},K.prototype.getContainer=function(){return this.canvas},K.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},K.prototype.hide=function(){this.canvas.style.display="none"},K.prototype.setZIndex=function(i){this.zIndex=i,this.canvas.style.zIndex=this.zIndex},K.prototype.getZIndex=function(){return this.zIndex});var F=F||function(){var i=[];return{getAll:function(){return i},removeAll:function(){i=[]},add:function(n){i.push(n)},remove:function(n){var e=i.indexOf(n);e!==-1&&i.splice(e,1)},update:function(n,e){if(i.length===0)return!1;var a=0;for(n=n!==void 0?n:F.now();a<i.length;)i[a].update(n)||e?a++:i.splice(a,1);return!0}}}();typeof window=="undefined"&&typeof process!="undefined"?F.now=function(){var i=process.hrtime();return i[0]*1e3+i[1]/1e6}:typeof window!="undefined"&&window.performance!==void 0&&window.performance.now!==void 0?F.now=window.performance.now.bind(window.performance):Date.now!==void 0?F.now=Date.now:F.now=function(){return new Date().getTime()},F.Tween=function(i){var t=i,n={},e={},a={},r=1e3,o=0,s,h=!1,u=!1,v=0,l=null,c=F.Easing.Linear.None,f=F.Interpolation.Linear,p=[],g=null,y=!1,_=null,w=null,E=null;this.to=function(x,b){return e=x,b!==void 0&&(r=b),this},this.start=function(x){F.add(this),u=!0,y=!1,l=x!==void 0?x:F.now(),l+=v;for(var b in e){if(e[b]instanceof Array){if(e[b].length===0)continue;e[b]=[t[b]].concat(e[b])}t[b]!==void 0&&(n[b]=t[b],n[b]instanceof Array||(n[b]*=1),a[b]=n[b]||0)}return this},this.stop=function(){return u?(F.remove(this),u=!1,E!==null&&E.call(t,t),this.stopChainedTweens(),this):this},this.end=function(){return this.update(l+r),this},this.stopChainedTweens=function(){for(var x=0,b=p.length;x<b;x++)p[x].stop()},this.delay=function(x){return v=x,this},this.repeat=function(x){return o=x,this},this.repeatDelay=function(x){return s=x,this},this.yoyo=function(x){return h=x,this},this.easing=function(x){return c=x,this},this.interpolation=function(x){return f=x,this},this.chain=function(){return p=arguments,this},this.onStart=function(x){return g=x,this},this.onUpdate=function(x){return _=x,this},this.onComplete=function(x){return w=x,this},this.onStop=function(x){return E=x,this},this.update=function(x){var b,z,B;if(x<l)return!0;y===!1&&(g!==null&&g.call(t,t),y=!0),z=(x-l)/r,z=z>1?1:z,B=c(z);for(b in e)if(n[b]!==void 0){var I=n[b]||0,S=e[b];S instanceof Array?t[b]=f(S,B):(typeof S=="string"&&(S.charAt(0)==="+"||S.charAt(0)==="-"?S=I+parseFloat(S):S=parseFloat(S)),typeof S=="number"&&(t[b]=I+(S-I)*B))}if(_!==null&&_.call(t,B),z===1)if(o>0){isFinite(o)&&o--;for(b in a){if(typeof e[b]=="string"&&(a[b]=a[b]+parseFloat(e[b])),h){var W=a[b];a[b]=e[b],e[b]=W}n[b]=a[b]}return s!==void 0?l=x+s:l=x+v,!0}else{w!==null&&w.call(t,t);for(var U=0,N=p.length;U<N;U++)p[U].start(l+r);return!1}return!0}},F.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-F.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?F.Easing.Bounce.In(t*2)*.5:F.Easing.Bounce.Out(t*2-1)*.5+.5}}},F.Interpolation={Linear:function(t,n){var e=t.length-1,a=e*n,r=Math.floor(a),o=F.Interpolation.Utils.Linear;return n<0?o(t[0],t[1],a):n>1?o(t[e],t[e-1],e-a):o(t[r],t[r+1>e?e:r+1],a-r)},Bezier:function(t,n){for(var e=0,a=t.length-1,r=Math.pow,o=F.Interpolation.Utils.Bernstein,s=0;s<=a;s++)e+=r(1-n,a-s)*r(n,s)*t[s]*o(a,s);return e},CatmullRom:function(t,n){var e=t.length-1,a=e*n,r=Math.floor(a),o=F.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(n<0&&(r=Math.floor(a=e*(1+n))),o(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],a-r)):n<0?t[0]-(o(t[0],t[0],t[1],t[1],-a)-t[0]):n>1?t[e]-(o(t[e],t[e],t[e-1],t[e-1],a-e)-t[e]):o(t[r?r-1:0],t[r],t[e<r+1?e:r+1],t[e<r+2?e:r+2],a-r)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=F.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var i=[1];return function(t){var n=1;if(i[t])return i[t];for(var e=t;e>1;e--)n*=e;return i[t]=n,n}}(),CatmullRom:function(t,n,e,a,r){var o=(e-t)*.5,s=(a-n)*.5,h=r*r,u=r*h;return(2*n-2*e+o+s)*u+(-3*n+3*e-2*o-s)*h+o*r+n}}};function hn(i,t){var n=t[0]-i[0],e=t[1]-i[1],a=360*Math.atan(e/n)/(2*Math.PI);return t[0]<i[0]&&(a=a+180),a}var Mt={},se={draw:function(t,n,e){var a="http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png";e.arrow&&e.arrow.url&&(a=e.arrow.url),Mt[a]||(Mt[a]=null);var r=Mt[a];if(!r){var o=Array.prototype.slice.call(arguments),s=new Image;s.onload=function(){Mt[a]=s,se.draw.apply(null,o)},s.src=a;return}var h=n instanceof M?n.get():n;t.save();for(var u in e)t[u]=e[u];for(var v=null,l=0,c=h.length;l<c;l++){var f=h[l];t.save(),(f.fillStyle||f._fillStyle)&&(t.fillStyle=f.fillStyle||f._fillStyle),(f.strokeStyle||f._strokeStyle)&&(t.strokeStyle=f.strokeStyle||f._strokeStyle);var p=f.geometry.type;if(t.beginPath(),p==="LineString"){for(var g=f.geometry._coordinates||f.geometry.coordinates,y=e.arrow.interval!==void 0?e.arrow.interval:1,_=0;_<g.length;_+=y)if(g[_]&&g[_+1]){var w=g[_];if(v&&un(w,v)<30)continue;t.save();var E=hn(g[_],g[_+1]);t.translate(w[0],w[1]),t.rotate(E*Math.PI/180),t.drawImage(r,-r.width/2/2,-r.height/2/2,r.width/2,r.height/2),t.restore(),v=w}}t.restore()}t.restore()}};function un(i,t){return Math.sqrt(Math.pow(i[0]-t[0],2)+Math.pow(i[1]-t[1],2))}var ln={draw:function(t,n,e){var a=n instanceof M?n.get():n;t.save(),t.fillStyle=e.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),e.multiPolygonDraw=function(){t.save(),t.clip(),Y(t),t.restore()};for(var r=0,o=a.length;r<o;r++)t.beginPath(),ct.drawDataSet(t,[a[r]],e),t.save(),t.clip(),Y(t),t.restore();t.restore()}},Tt={},rt={},vn={draw:function(t,n,e){t.save();for(var a=n instanceof M?n.get():n,r=0;r<a.length;r++){var o=a[r],s=o.geometry._coordinates||o.geometry.coordinates;if(t.beginPath(),o.properties&&o.properties.cluster){if(t.arc(s[0],s[1],o.size,0,Math.PI*2),t.fillStyle=o.fillStyle,t.fill(),e.label&&e.label.show!==!1){t.fillStyle=e.label.fillStyle||"white",e.label.font&&(t.font=e.label.font),e.label.shadowColor&&(t.shadowColor=e.label.shadowColor),e.label.shadowBlur&&(t.shadowBlur=e.label.shadowBlur);var h=o.properties.point_count,u=t.measureText(h).width;t.fillText(h,s[0]+.5-u/2,s[1]+.5+3)}}else this.drawIcon(o,e,t)}t.restore()},drawIcon:function(t,n,e){var a=t.geometry._coordinates||t.geometry.coordinates,r=Ee(a,2),o=r[0],s=r[1],h=Object.assign({},n.iconOptions,t.iconOptions),u=function(){e.beginPath(),e.arc(o,s,n.size||5,0,Math.PI*2),e.fillStyle=n.fillStyle||"red",e.fill()};if(!h.url){u();return}var v=h.width,l=h.height,c=h.offset||{x:0,y:0};o=o-~~v/2+c.x,s=s-~~l/2+c.y;var f=window.encodeURIComponent(h.url),p=Tt[f];p?p==="error"?u():v&&l?e.drawImage(p,o,s,v,l):e.drawImage(p,o,s):(rt[f]||(rt[f]=[],fn(f,function(g,y){rt[y]&&rt[y].forEach(function(_){return _(g)}),rt[y]=null,Tt[y]=g},function(g){rt[g]&&rt[g].forEach(function(y){return y("error",g)}),rt[g]=null,Tt[g]="error",u()})),rt[f].push(function(g,y,_,w){return function(E){E==="error"?u():_&&w?e.drawImage(E,g,y,_,w):e.drawImage(E,g,y)}}(o,s,v,l)))}};function fn(i,t,n){var e=new Image;e.onload=function(){t&&t(e,i)},e.onerror=function(){n&&n(i)},e.src=window.decodeURIComponent(i)}var cn={draw:function(t,n,e){var a=n instanceof M?n.get():n;t.save();for(var r in e)t[r]=e[r];var o=[],s=e._size||e.size;s?t.font="bold "+s+"px Arial":s=12;var h=e.textKey||"text";if(e.textAlign||(t.textAlign="center"),e.textBaseline||(t.textBaseline="middle"),e.avoid)for(var u=0,v=a.length;u<v;u++){var l=a[u].offset||e.offset||{x:0,y:0},c=a[u].geometry._coordinates||a[u].geometry.coordinates,f=c[0]+l.x,p=c[1]+l.y,g=a[u][h],y=t.measureText(g).width,_=f-y/2,w=p-s/2,E={sw:{x:_,y:w+s},ne:{x:_+y,y:w}};dn(o,E)||(o.push(E),_=_+y/2,w=w+s/2,t.fillText(g,_,w))}else for(var u=0,v=a.length;u<v;u++){var l=a[u].offset||e.offset||{x:0,y:0},c=a[u].geometry._coordinates||a[u].geometry.coordinates,f=c[0]+l.x,p=c[1]+l.y,g=a[u][h];t.fillText(g,f,p)}t.restore()}};function dn(i,t){for(var n=0;n<i.length;n++)if(pn(i[n],t))return!0;return!1}function pn(i,t){var n=Math.min(i.ne.x,t.ne.x),e=Math.min(i.sw.y,t.sw.y),a=Math.max(i.sw.x,t.sw.x),r=Math.max(i.ne.y,t.ne.y);return n>a&&e>r}var Dt={},ot={},gn={draw:function(t,n,e){for(var a=n instanceof M?n.get():n,r=function(){var v=a[o];if(v.geometry)if(h=v.icon||e.icon,typeof h=="string"){var l=window.encodeURIComponent(h),c=Dt[l];c?Ft(c,e,t,v):(ot[l]||(ot[l]=[],mn(l,function(f,p){ot[p]&&ot[p].forEach(function(g){return g(f)}),ot[p]=null,Dt[p]=f},function(f){ot[f]&&ot[f].forEach(function(p){return p("error")}),ot[f]=null,Dt[f]="error"})),ot[l].push(function(f){Ft(f,e,t,v)}))}else Ft(h,e,t,v)},o=0,s=a.length;o<s;o++){var h;r()}}};function Ft(i,t,n,e){n.save();var a=e.geometry._coordinates||e.geometry.coordinates,r=a[0],o=a[1],s=t.offset||{x:0,y:0},h=e.width||t._width||t.width,u=e.height||t._height||t.height;if(r=r-~~h/2+s.x,o=o-~~u/2+s.y,typeof i=="string"){n.beginPath(),n.arc(r,o,t.size||5,0,Math.PI*2),n.fillStyle=t.fillStyle||"red",n.fill();return}var v=e.deg||t.deg;v&&(n.translate(r,o),n.rotate(v*Math.PI/180),n.translate(-r,-o)),t.sx&&t.sy&&t.swidth&&t.sheight&&t.width&&t.height?n.drawImage(i,t.sx,t.sy,t.swidth,t.sheight,r,o,h,u):h&&u?n.drawImage(i,r,o,h,u):n.drawImage(i,r,o),n.restore()}function mn(i,t,n){var e=new Image;e.onload=function(){t&&t(e,i)},e.onerror=function(){n&&n(i)},e.src=window.decodeURIComponent(i)}function Bt(i,t,n,e,a,r){if(!(a-e<=n)){var o=e+a>>1;he(i,t,o,e,a,r%2),Bt(i,t,n,e,o-1,r+1),Bt(i,t,n,o+1,a,r+1)}}function he(i,t,n,e,a,r){for(;a>e;){if(a-e>600){var o=a-e+1,s=n-e+1,h=Math.log(o),u=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*u*(o-u)/o)*(s-o/2<0?-1:1),l=Math.max(e,Math.floor(n-s*u/o+v)),c=Math.min(a,Math.floor(n+(o-s)*u/o+v));he(i,t,n,l,c,r)}var f=t[2*n+r],p=e,g=a;for(_t(i,t,e,n),t[2*a+r]>f&&_t(i,t,e,a);p<g;){for(_t(i,t,p,g),p++,g--;t[2*p+r]<f;)p++;for(;t[2*g+r]>f;)g--}t[2*e+r]===f?_t(i,t,e,g):(g++,_t(i,t,g,a)),g<=n&&(e=g+1),n<=g&&(a=g-1)}}function _t(i,t,n,e){Ut(i,n,e),Ut(t,2*n,2*e),Ut(t,2*n+1,2*e+1)}function Ut(i,t,n){var e=i[t];i[t]=i[n],i[n]=e}function yn(i,t,n,e,a,r,o){for(var s=[0,i.length-1,0],h=[],u,v;s.length;){var l=s.pop(),c=s.pop(),f=s.pop();if(c-f<=o){for(var p=f;p<=c;p++)u=t[2*p],v=t[2*p+1],u>=n&&u<=a&&v>=e&&v<=r&&h.push(i[p]);continue}var g=Math.floor((f+c)/2);u=t[2*g],v=t[2*g+1],u>=n&&u<=a&&v>=e&&v<=r&&h.push(i[g]);var y=(l+1)%2;(l===0?n<=u:e<=v)&&(s.push(f),s.push(g-1),s.push(y)),(l===0?a>=u:r>=v)&&(s.push(g+1),s.push(c),s.push(y))}return h}function _n(i,t,n,e,a,r){for(var o=[0,i.length-1,0],s=[],h=a*a;o.length;){var u=o.pop(),v=o.pop(),l=o.pop();if(v-l<=r){for(var c=l;c<=v;c++)ue(t[2*c],t[2*c+1],n,e)<=h&&s.push(i[c]);continue}var f=Math.floor((l+v)/2),p=t[2*f],g=t[2*f+1];ue(p,g,n,e)<=h&&s.push(i[f]);var y=(u+1)%2;(u===0?n-a<=p:e-a<=g)&&(o.push(l),o.push(f-1),o.push(y)),(u===0?n+a>=p:e+a>=g)&&(o.push(f+1),o.push(v),o.push(y))}return s}function ue(i,t,n,e){var a=i-n,r=t-e;return a*a+r*r}var wn=function(t){return t[0]},xn=function(t){return t[1]},St=function(t,n,e,a,r){n===void 0&&(n=wn),e===void 0&&(e=xn),a===void 0&&(a=64),r===void 0&&(r=Float64Array),this.nodeSize=a,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),h=this.coords=new r(t.length*2),u=0;u<t.length;u++)s[u]=u,h[2*u]=n(t[u]),h[2*u+1]=e(t[u]);Bt(s,h,a,0,s.length-1,0)};St.prototype.range=function(t,n,e,a){return yn(this.ids,this.coords,t,n,e,a,this.nodeSize)},St.prototype.within=function(t,n,e){return _n(this.ids,this.coords,t,n,e,this.nodeSize)};var bn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},J=function(t){this.options=wt(Object.create(bn),t),this.trees=new Array(this.options.maxZoom+1)};J.prototype.load=function(t){var n=this.options;n.log;var e=n.minZoom,a=n.maxZoom,r=n.nodeSize;""+t.length,this.points=t;for(var o=[],s=0;s<t.length;s++)!t[s].geometry||o.push(En(t[s],s));this.trees[a+1]=new St(o,fe,ce,r,Float32Array);for(var h=a;h>=e;h--)o=this._cluster(o,h),this.trees[h]=new St(o,fe,ce,r,Float32Array);return this},J.prototype.getClusters=function(t,n){var e=((t[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[1])),r=t[2]===180?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)e=-180,r=180;else if(e>r){var s=this.getClusters([e,a,180,o],n),h=this.getClusters([-180,a,r,o],n);return s.concat(h)}for(var u=this.trees[this._limitZoom(n)],v=u.range(Zt(e),Nt(o),Zt(r),Nt(a)),l=[],c=0,f=v;c<f.length;c+=1){var p=f[c],g=u.points[p];l.push(g.numPoints?le(g):this.points[g.index])}return l},J.prototype.getChildren=function(t){var n=this._getOriginId(t),e=this._getOriginZoom(t),a="No cluster with the specified id.",r=this.trees[e];if(!r)throw new Error(a);var o=r.points[n];if(!o)throw new Error(a);for(var s=this.options.radius/(this.options.extent*Math.pow(2,e-1)),h=r.within(o.x,o.y,s),u=[],v=0,l=h;v<l.length;v+=1){var c=l[v],f=r.points[c];f.parentId===t&&u.push(f.numPoints?le(f):this.points[f.index])}if(u.length===0)throw new Error(a);return u},J.prototype.getLeaves=function(t,n,e){n=n||10,e=e||0;var a=[];return this._appendLeaves(a,t,n,e,0),a},J.prototype.getTile=function(t,n,e){var a=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,s=o.extent,h=o.radius,u=h/s,v=(e-u)/r,l=(e+1+u)/r,c={features:[]};return this._addTileFeatures(a.range((n-u)/r,v,(n+1+u)/r,l),a.points,n,e,r,c),n===0&&this._addTileFeatures(a.range(1-u/r,v,1,l),a.points,r,e,r,c),n===r-1&&this._addTileFeatures(a.range(0,v,u/r,l),a.points,-1,e,r,c),c.features.length?c:null},J.prototype.getClusterExpansionZoom=function(t){for(var n=this._getOriginZoom(t)-1;n<=this.options.maxZoom;){var e=this.getChildren(t);if(n++,e.length!==1)break;t=e[0].properties.cluster_id}return n},J.prototype._appendLeaves=function(t,n,e,a,r){for(var o=this.getChildren(n),s=0,h=o;s<h.length;s+=1){var u=h[s],v=u.properties;if(v&&v.cluster?r+v.point_count<=a?r+=v.point_count:r=this._appendLeaves(t,v.cluster_id,e,a,r):r<a?r++:t.push(u),t.length===e)break}return r},J.prototype._addTileFeatures=function(t,n,e,a,r,o){for(var s=0,h=t;s<h.length;s+=1){var u=h[s],v=n[u],l=v.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(v.x*r-e)),Math.round(this.options.extent*(v.y*r-a))]],tags:l?ve(v):this.points[v.index].properties},f=void 0;l?f=v.id:this.options.generateId?f=v.index:this.points[v.index].id&&(f=this.points[v.index].id),f!==void 0&&(c.id=f),o.features.push(c)}},J.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},J.prototype._cluster=function(t,n){for(var e=[],a=this.options,r=a.radius,o=a.extent,s=a.reduce,h=a.minPoints,u=r/(o*Math.pow(2,n)),v=0;v<t.length;v++){var l=t[v];if(!(l.zoom<=n)){l.zoom=n;for(var c=this.trees[n+1],f=c.within(l.x,l.y,u),p=l.numPoints||1,g=p,y=0,_=f;y<_.length;y+=1){var w=_[y],E=c.points[w];E.zoom>n&&(g+=E.numPoints||1)}if(g>=h){for(var x=l.x*p,b=l.y*p,z=s&&p>1?this._map(l,!0):null,B=(v<<5)+(n+1)+this.points.length,I=0,S=f;I<S.length;I+=1){var W=S[I],U=c.points[W];if(!(U.zoom<=n)){U.zoom=n;var N=U.numPoints||1;x+=U.x*N,b+=U.y*N,U.parentId=B,s&&(z||(z=this._map(l,!0)),s(z,this._map(U)))}}l.parentId=B,e.push(Cn(x/g,b/g,B,g,z))}else if(e.push(l),g>1)for(var j=0,X=f;j<X.length;j+=1){var xt=X[j],vt=c.points[xt];vt.zoom<=n||(vt.zoom=n,e.push(vt))}}}return e},J.prototype._getOriginId=function(t){return t-this.points.length>>5},J.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},J.prototype._map=function(t,n){if(t.numPoints)return n?wt({},t.properties):t.properties;var e=this.points[t.index].properties,a=this.options.map(e);return n&&a===e?wt({},a):a};function Cn(i,t,n,e,a){return{x:i,y:t,zoom:1/0,id:n,parentId:-1,numPoints:e,properties:a}}function En(i,t){var n=i.geometry.coordinates,e=n[0],a=n[1];return{x:Zt(e),y:Nt(a),zoom:1/0,index:t,parentId:-1}}function le(i){return{type:"Feature",id:i.id,properties:ve(i),geometry:{type:"Point",coordinates:[Ln(i.x),Mn(i.y)]}}}function ve(i){var t=i.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return wt(wt({},i.properties),{cluster:!0,cluster_id:i.id,point_count:t,point_count_abbreviated:n})}function Zt(i){return i/360+.5}function Nt(i){var t=Math.sin(i*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Ln(i){return(i-.5)*360}function Mn(i){var t=(180-i*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function wt(i,t){for(var n in t)i[n]=t[n];return i}function fe(i){return i.x}function ce(i){return i.y}typeof window!="undefined"&&requestAnimationFrame(de);function de(i){requestAnimationFrame(de),F.update(i)}var at=function(){function i(t,n,e){Q(this,i),n instanceof M||(n=new M(n)),this.dataSet=n,this.map=t,e.draw==="cluster"&&this.refreshCluster(e)}return tt(i,[{key:"refreshCluster",value:function(n){n=n||this.options,this.supercluster=new J({maxZoom:n.maxZoom||19,radius:n.clusterRadius||100,minPoints:n.minPoints||2,extent:n.extent||512}),this.supercluster.load(this.dataSet.get()),this.supercluster.trees.forEach(function(e){var a=0,r=1/0;e.points.forEach(function(o){a=Math.max(o.numPoints||0,a),r=Math.min(o.numPoints||1/0,r)}),e.max=a,e.min=r}),this.clusterDataSet=new M}},{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(n){var e=this;if(e.intensity=new V({maxSize:e.options.maxSize,minSize:e.options.minSize,gradient:e.options.gradient,max:e.options.max||this.dataSet.getMax("count")}),e.category=new yt(e.options.splitList),e.choropleth=new lt(e.options.splitList),e.options.splitList===void 0&&e.category.generateByDataSet(this.dataSet,e.options.color),e.options.splitList===void 0){var a=e.options.min||this.dataSet.getMin("count"),r=e.options.max||this.dataSet.getMax("count");e.choropleth.generateByMinMax(a,r)}}},{key:"getLegend",value:function(n){this.options.draw;var e=this;if(e.options.draw=="intensity"||e.options.draw=="heatmap")return this.intensity.getLegend(n);if(e.options.draw=="category")return this.category.getLegend(n)}},{key:"processData",value:function(n){var e=this,a=e.options.draw;if(a=="bubble"||a=="intensity"||a=="category"||a=="choropleth"||a=="simple")for(var r=0;r<n.length;r++){var o=n[r];e.options.draw=="bubble"?n[r]._size=e.intensity.getSize(o.count):n[r]._size=void 0;var s="_fillStyle";(n[r].geometry.type==="LineString"||e.options.styleType==="stroke")&&(s="_strokeStyle"),e.options.draw=="intensity"?n[r][s]=e.intensity.getColor(o.count):e.options.draw=="category"?n[r][s]=e.category.get(o.count):e.options.draw=="choropleth"&&(n[r][s]=e.choropleth.get(o.count))}}},{key:"isEnabledTime",value:function(){var n=this.options.animation,e=n&&n.enabled!==!1;return e}},{key:"argCheck",value:function(n){n.draw=="heatmap"&&n.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(n,e,a,r){var o=this;switch(o.options.draw){case"heatmap":Yt.draw(n,e,o.options);break;case"grid":case"cluster":case"honeycomb":o.options.offset={x:r.x,y:r.y},o.options.draw==="grid"?Jt.draw(n,e,o.options):o.options.draw==="cluster"?vn.draw(n,e,o.options):jt.draw(n,e,o.options);break;case"text":cn.draw(n,e,o.options);break;case"icon":gn.draw(n,e,o.options);break;case"clip":ln.draw(n,e,o.options);break;default:o.options.context=="webgl"?re.draw(o.canvasLayer.canvas.getContext("webgl"),e,o.options):$t.draw(n,e,o.options)}o.options.arrow&&o.options.arrow.show!==!1&&se.draw(n,e,o.options)}},{key:"isPointInPath",value:function(a,e){var a=this.canvasLayer.canvas.getContext(this.context),r;this.options.draw==="cluster"&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=this.getZoom())?r=this.clusterDataSet.get():r=this.dataSet.get();for(var o=0;o<r.length;o++){a.beginPath();var s=this.options,h=e.x*this.canvasLayer.devicePixelRatio,u=e.y*this.canvasLayer.devicePixelRatio;s.multiPolygonDraw=function(){if(a.isPointInPath(h,u))return r[o]},ct.draw(a,r[o],s);var v=r[o].geometry&&r[o].geometry.type;if(v.indexOf("LineString")>-1){if(a.isPointInStroke&&a.isPointInStroke(h,u))return r[o]}else if(a.isPointInPath(h,u))return r[o]}}},{key:"getClusterPoints",value:function(n){var e=this;if(n.type!=="Feature")return[];var a=this.supercluster.getChildren(n.id);return a.map(function(r){return r.type==="Feature"?e.getClusterPoints(r):r}).flat()}},{key:"clickEvent",value:function(n,e){if(!!this.options.methods){var a=this.isPointInPath(this.getContext(),n);if(a){if(this.options.draw==="cluster"){var r=this.getClusterPoints(a);a.children=r}this.options.methods.click(a,e)}else this.options.methods.click(null,e)}}},{key:"mousemoveEvent",value:function(n,e){if(!!this.options.methods){var a=this.isPointInPath(this.getContext(),n);if(a){if(this.options.draw==="cluster"){var r=this.getClusterPoints(a);a.children=r}this.options.methods.mousemove(a,e)}else this.options.methods.mousemove(null,e)}}},{key:"tapEvent",value:function(n,e){if(!!this.options.methods){var a=this.isPointInPath(this.getContext(),n);if(a){if(this.options.draw==="cluster"){var r=this.getClusterPoints(a);a.children=r}this.options.methods.tap(a,e)}else this.options.methods.tap(null,e)}}},{key:"update",value:function(n,e){var a=this,r=n.options,o=a.options;for(var s in r)o[s]=r[s];a.init(o),e!==!1&&a.draw()}},{key:"setOptions",value:function(n){var e=this;e.dataSet.reset(),e.init(n),e.draw()}},{key:"set",value:function(n){var e=this,a=this.getContext(),r=this.getDefaultContextConfig();for(var o in r)a[o]=r[o];e.init(n.options),e.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var n=this,e=n.options.animation;if(n.options.draw=="time"||n.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},n.animator=new F.Tween(this.steps).onUpdate(function(){n._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var a=e.duration*1e3||5e3;n.animator.to({step:e.stepsRange.end},a),n.animator.start()}else n.animator&&n.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var n=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=n.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),i}(),pe=typeof window=="undefined"?{}:window,Sn=pe.BMap||pe.BMapGL,Pn=function(i){it(t,i);function t(n,e,a){Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a));r.map=n,r.options=a||{},r.dataSet=e;var o=new K({map:n,zIndex:r.options.zIndex,update:r._canvasUpdate.bind(r)});r.init(r.options),r.canvasLayer=o,r.transferToMercator();var s=r;return e.on("change",function(){s.transferToMercator(),o.draw()}),r.ctx=o.canvas.getContext("2d"),r.start(),r}return tt(t,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(e){var a=this;a.options=e,this.initDataRange(e),this.context=a.options.context||"2d",a.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(a.options.zIndex),a.options.max&&this.intensity.setMax(a.options.max),a.options.min&&this.intensity.setMin(a.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var e=this.map,a=e.getMapType(),r;if(a.getProjection?r=a.getProjection():r={lngLatToPoint:function(h){var u=e.lnglatToMercator(h.lng,h.lat);return{x:u[0],y:u[1]}}},this.options.coordType!=="bd09mc"){var o=this.dataSet.get();o=this.dataSet.transferCoordinate(o,function(s){var h=r.lngLatToPoint({lng:s[0],lat:s[1]});return[h.x,h.y]},"coordinates","coordinates_mercator"),this.dataSet._set(o)}}},{key:"_canvasUpdate",value:function(){var e=this.ctx;if(!!e){var a=this.map,r,o;a.getMapType().getProjection?(r=a.getMapType().getProjection(),o=r.lngLatToPoint(a.getCenter())):(o={x:a.getCenter().lng,y:a.getCenter().lat},o.x>-180&&o.x<180&&(o=a.lnglatToMercator(o.x,o.y),o={x:o[0],y:o[1]}),r={lngLatToPoint:function(l){var c=a.lnglatToMercator(l.lng,l.lat);return{x:c[0],y:c[1]}}});var s;r.getZoomUnits?s=r.getZoomUnits(a.getZoom()):s=Math.pow(2,18-a.getZoom());var h=new Sn.Pixel(o.x-a.getSize().width/2*s,o.y+a.getSize().height/2*s);Y(e);var u={fromColumn:this.options.coordType=="bd09mc"?"coordinates":"coordinates_mercator",transferCoordinate:function(l){if(!!l){var c=(l[0]-h.x)/s,f=(h.y-l[1])/s;return[c,f]}}};this.data=this.dataSet.get(u),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var e=this.ctx,a=this.data;if(!!a){e.save(),e.globalCompositeOperation="destination-out",e.fillStyle="rgba(0, 0, 0, .1)",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.restore(),e.save(),this.options.shadowColor&&(e.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(e.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(e.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(e.globalCompositeOperation=this.options.globalCompositeOperation);for(var r=this.options,o=0;o<a.length;o++)if(a[o].geometry.type==="Point"){e.beginPath();var s=a[o].size||this.options.size,h=a[o].minSize||this.options.minSize||0;a[o]._size===void 0&&(a[o]._size=h),e.arc(a[o].geometry._coordinates[0],a[o].geometry._coordinates[1],a[o]._size,0,Math.PI*2,!0),e.closePath(),a[o]._size++,a[o]._size>s&&(a[o]._size=h),e.lineWidth=1,e.strokeStyle=a[o].strokeStyle||a[o]._strokeStyle||r.strokeStyle||"yellow",e.stroke();var u=a[o].fillStyle||a[o]._fillStyle||r.fillStyle;u&&(e.fillStyle=u,e.fill())}else if(a[o].geometry.type==="LineString"){e.beginPath();var v=a[o].size||this.options.size||5,h=a[o].minSize||this.options.minSize||0;a[o]._index===void 0&&(a[o]._index=0);var l=a[o]._index;e.arc(a[o].geometry._coordinates[l][0],a[o].geometry._coordinates[l][1],v,0,Math.PI*2,!0),e.closePath(),a[o]._index++,a[o]._index>=a[o].geometry._coordinates.length&&(a[o]._index=0);var c=a[o].strokeStyle||r.strokeStyle,u=a[o].fillStyle||r.fillStyle||"yellow";e.fillStyle=u,e.fill(),c&&r.lineWidth&&(e.lineWidth=r.lineWidth||1,e.strokeStyle=c,e.stroke())}e.restore()}}},{key:"animate",value:function(){this.drawAnimation();var e=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),e)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.stop(),this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),t}(at),ge=typeof window=="undefined"?{}:window,me=ge.BMap||ge.BMapGL,kn=function(i){it(t,i);function t(n,e,a){Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a)),o=r;a=a||{},r.clickEvent=r.clickEvent.bind(r),r.mousemoveEvent=r.mousemoveEvent.bind(r),r.tapEvent=r.tapEvent.bind(r),o.init(a),o.argCheck(a),o.transferToMercator();var s=r.canvasLayer=new K({map:n,context:r.context,updateImmediate:a.updateImmediate,paneName:a.paneName,mixBlendMode:a.mixBlendMode,enableMassClear:a.enableMassClear,zIndex:a.zIndex,update:function(){o._canvasUpdate()}});return e.on("change",function(){o.transferToMercator(),a.draw==="cluster"&&o.refreshCluster(),s.draw()}),r}return tt(t,[{key:"clickEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,a,e)}},{key:"mousemoveEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,a,e)}},{key:"tapEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tapEvent",this).call(this,a,e)}},{key:"bindEvent",value:function(e){this.unbindEvent();var a=this.map,r=0,o=this;this.options.methods&&(this.options.methods.click&&(a.setDefaultCursor("default"),a.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&a.addEventListener("mousemove",this.mousemoveEvent),"ontouchend"in window.document&&this.options.methods.tap&&(a.addEventListener("touchstart",function(s){r=new Date}),a.addEventListener("touchend",function(s){new Date-r<300&&o.tapEvent(s)})))}},{key:"unbindEvent",value:function(e){var a=this.map;this.options.methods&&(this.options.methods.click&&a.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&a.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(e){e||(e=this.dataSet);var a=this.map,r=a.getMapType(),o;if(r.getProjection?o=r.getProjection():o={lngLatToPoint:function(u){var v=a.lnglatToMercator(u.lng,u.lat);return{x:v[0],y:v[1]}}},this.options.coordType!=="bd09mc"){var s=e.get();s=e.transferCoordinate(s,function(h){if(h[0]<-180||h[0]>180||h[1]<-90||h[1]>90)return h;var u=o.lngLatToPoint({lng:h[0],lat:h[1]});return[u.x,u.y]},"coordinates","coordinates_mercator"),e._set(s)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(e){if(!!this.canvasLayer){var a=this,r=this.options.animation,o=this.canvasLayer._map,s,h;o.getMapType().getProjection?(s=o.getMapType().getProjection(),h=s.lngLatToPoint(o.getCenter())):(h={x:o.getCenter().lng,y:o.getCenter().lat},h.x>-180&&h.x<180&&(h=o.lnglatToMercator(h.x,h.y),h={x:h[0],y:h[1]}),s={lngLatToPoint:function(N){var j=o.lnglatToMercator(N.lng,N.lat);return{x:j[0],y:j[1]}}});var u;s.getZoomUnits?u=s.getZoomUnits(o.getZoom()):u=Math.pow(2,18-o.getZoom());var v=new me.Pixel(h.x-o.getSize().width/2*u,h.y+o.getSize().height/2*u),l=this.getContext();if(this.isEnabledTime()){if(e===void 0){Y(l);return}this.context=="2d"&&(l.save(),l.globalCompositeOperation="destination-out",l.fillStyle="rgba(0, 0, 0, .1)",l.fillRect(0,0,l.canvas.width,l.canvas.height),l.restore())}else Y(l);if(this.context=="2d")for(var c in this.options)l[c]=this.options[c];else l.clear(l.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&o.getZoom()<this.options.minZoom||this.options.maxZoom&&o.getZoom()>this.options.maxZoom)){var f=1;this.context!="2d"&&(f=this.canvasLayer.devicePixelRatio);var p={fromColumn:this.options.coordType=="bd09mc"?"coordinates":"coordinates_mercator",transferCoordinate:function(N){var j=(N[0]-v.x)/u*f,X=(v.y-N[1])/u*f;return[j,X]}};e!==void 0&&(p.filter=function(U){var N=r.trails||10;return!!(e&&U.time>e-N&&U.time<e)});var g,y=this.getZoom();if(this.options.draw==="cluster"&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=y)){var _=this.map.getBounds(),w=_.getNorthEast(),E=_.getSouthWest(),x=this.supercluster.getClusters([E.lng,E.lat,w.lng,w.lat],y);this.pointCountMax=this.supercluster.trees[y].max,this.pointCountMin=this.supercluster.trees[y].min;var b={},z=null,B=null;this.pointCountMax===this.pointCountMin?(z=this.options.fillStyle,B=this.options.minSize||8):b=new V({min:this.pointCountMin,max:this.pointCountMax,minSize:this.options.minSize||8,maxSize:this.options.maxSize||30,gradient:this.options.gradient});for(var I=0;I<x.length;I++){var S=x[I];S.properties&&S.properties.cluster_id?(x[I].size=B||b.getSize(S.properties.point_count),x[I].fillStyle=z||b.getColor(S.properties.point_count)):x[I].size=a.options.size}this.clusterDataSet.set(x),this.transferToMercator(this.clusterDataSet),g=a.clusterDataSet.get(p)}else g=a.dataSet.get(p);this.processData(g);var W=o.pointToPixel(new me.Point(0,0));a.options.unit=="m"?(a.options.size&&(a.options._size=a.options.size/u),a.options.width&&(a.options._width=a.options.width/u),a.options.height&&(a.options._height=a.options.height/u)):(a.options._size=a.options.size,a.options._height=a.options.height,a.options._width=a.options.width),this.drawContext(l,g,a.options,W),a.options.updateCallback&&a.options.updateCallback(e)}}}},{key:"init",value:function(e){var a=this;a.options=e,this.initDataRange(e),this.context=a.options.context||"2d",a.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(a.options.zIndex),a.options.max&&this.intensity.setMax(a.options.max),a.options.min&&this.intensity.setMin(a.options.min),this.initAnimator(),this.bindEvent()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer),this.bindEvent()}},{key:"hide",value:function(){this.unbindEvent(),this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer&&this.canvasLayer.draw()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),t}(at);function T(i){this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=T.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var t=document.createElement("canvas");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.pointerEvents="none",this.canvas=t,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1;function n(e,a){return function(){a.apply(e)}}this.repositionFunction_=n(this,this.repositionCanvas_),this.resizeFunction_=n(this,this.resize_),this.requestUpdateFunction_=n(this,this.update_),i&&this.setOptions(i)}var q=typeof window=="undefined"?{}:window;q.google&&q.google.maps&&(T.prototype=new google.maps.OverlayView,T.DEFAULT_PANE_NAME_="overlayLayer",T.CSS_TRANSFORM_=function(){for(var i=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++){var e=t[n];if(i.style[e]!==void 0)return e}return t[0]}(),T.prototype.requestAnimFrame_=q.requestAnimationFrame||q.webkitRequestAnimationFrame||q.mozRequestAnimationFrame||q.oRequestAnimationFrame||q.msRequestAnimationFrame||function(i){return q.setTimeout(i,1e3/60)},T.prototype.cancelAnimFrame_=q.cancelAnimationFrame||q.webkitCancelAnimationFrame||q.mozCancelAnimationFrame||q.oCancelAnimationFrame||q.msCancelAnimationFrame||function(i){},T.prototype.setOptions=function(i){i.animate!==void 0&&this.setAnimate(i.animate),i.paneName!==void 0&&this.setPaneName(i.paneName),i.updateHandler!==void 0&&this.setUpdateHandler(i.updateHandler),i.resizeHandler!==void 0&&this.setResizeHandler(i.resizeHandler),i.resolutionScale!==void 0&&this.setResolutionScale(i.resolutionScale),i.map!==void 0&&this.setMap(i.map)},T.prototype.setAnimate=function(i){this.isAnimated_=!!i,this.isAnimated_&&this.scheduleUpdate()},T.prototype.isAnimated=function(){return this.isAnimated_},T.prototype.setPaneName=function(i){this.paneName_=i,this.setPane_()},T.prototype.getPaneName=function(){return this.paneName_},T.prototype.setPane_=function(){if(!!this.isAdded_){var i=this.getPanes();if(!i[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');i[this.paneName_].appendChild(this.canvas)}},T.prototype.setResizeHandler=function(i){this.resizeHandler_=i},T.prototype.setResolutionScale=function(i){typeof i=="number"&&(this.resolutionScale_=i,this.resize_())},T.prototype.setUpdateHandler=function(i){this.updateHandler_=i},T.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},T.prototype.onRemove=function(){!this.isAdded_||(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(q,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},T.prototype.resize_=function(){if(!!this.isAdded_){var i=this.getMap(),t=i.getDiv().offsetWidth,n=i.getDiv().offsetHeight,e=t*this.resolutionScale_,a=n*this.resolutionScale_,r=this.canvas.width,o=this.canvas.height;(r!==e||o!==a)&&(this.canvas.width=e,this.canvas.height=a,this.needsResize_=!0,this.scheduleUpdate()),(this.canvasCssWidth_!==t||this.canvasCssHeight_!==n)&&(this.canvasCssWidth_=t,this.canvasCssHeight_=n,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px")}},T.prototype.draw=function(){this.repositionCanvas_()},T.prototype.repositionCanvas_=function(){var i=this.getMap(),t=i.getBounds().getNorthEast().lat(),n=i.getCenter(),e=Math.pow(2,i.getZoom()),a=n.lng()-this.canvasCssWidth_*180/(256*e);this.topLeft_=new google.maps.LatLng(t,a);var r=this.getProjection(),o=r.fromLatLngToDivPixel(n),s=-Math.round(this.canvasCssWidth_/2-o.x),h=-Math.round(this.canvasCssHeight_/2-o.y);this.canvas.style[T.CSS_TRANSFORM_]="translate("+s+"px,"+h+"px)",this.scheduleUpdate()},T.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},T.prototype.getTopLeft=function(){return this.topLeft_},T.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(q,this.requestUpdateFunction_))});var On=function(i){it(t,i);function t(n,e,a){Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a)),o=r;a=a||{},o.init(a),o.argCheck(a);var s={map:n,animate:!1,updateHandler:function(){o._canvasUpdate()},resolutionScale};return r.canvasLayer=new T(s),r.clickEvent=r.clickEvent.bind(r),r.mousemoveEvent=r.mousemoveEvent.bind(r),r.bindEvent(),r}return tt(t,[{key:"clickEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,a,e)}},{key:"mousemoveEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,a,e)}},{key:"bindEvent",value:function(e){var a=this.map;this.options.methods&&(this.options.methods.click&&(a.setDefaultCursor("default"),a.addListener("click",this.clickEvent)),this.options.methods.mousemove&&a.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(e){var a=this.map;this.options.methods&&(this.options.methods.click&&a.removeListener("click",this.clickEvent),this.options.methods.mousemove&&a.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(e){if(!!this.canvasLayer){var a=this,r=a.options.animation,o=this.getContext();if(a.isEnabledTime()){if(e===void 0){Y(o);return}this.context=="2d"&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else Y(o);if(this.context=="2d")for(var s in a.options)o[s]=a.options[s];else o.clear(o.COLOR_BUFFER_BIT);if(!(a.options.minZoom&&h.getZoom()<a.options.minZoom||a.options.maxZoom&&h.getZoom()>a.options.maxZoom)){var v=1;this.context!="2d"&&(v=this.canvasLayer.devicePixelRatio);var h=this.map,u=h.getProjection(),v=Math.pow(2,h.zoom)*resolutionScale,l=u.fromLatLngToPoint(this.canvasLayer.getTopLeft()),c={transferCoordinate:function(w){var E=new google.maps.LatLng(w[1],w[0]),x=u.fromLatLngToPoint(E),b={x:(x.x-l.x)*v,y:(x.y-l.y)*v};return[b.x,b.y]}};e!==void 0&&(c.filter=function(_){var w=r.trails||10;return!!(e&&_.time>e-w&&_.time<e)});var f=a.dataSet.get(c);this.processData(f);var p=new google.maps.LatLng(0,0),g=u.fromLatLngToPoint(p),y={x:(g.x-l.x)*v,y:(g.y-l.y)*v};a.options.unit=="m"&&a.options.size?a.options._size=a.options.size/zoomUnit:a.options._size=a.options.size,this.drawContext(o,new M(f),a.options,y),a.options.updateCallback&&a.options.updateCallback(e)}}}},{key:"init",value:function(e){var a=this;a.options=e,this.initDataRange(e),this.context=a.options.context||"2d",a.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(a.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),t}(at),Ht=void 0;if(typeof maptalks!="undefined"){Ht=function(i){it(t,i);function t(n,e,a){Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,a));return r.options_=a,r.dataSet=e,r._initBaseLayer(a),r}return tt(t,[{key:"_initBaseLayer",value:function(e){var a=this,r=this.baseLayer=new at(null,this.dataSet,e);a.init(e),r.argCheck(e)}},{key:"clickEvent",value:function(e){if(!!this.baseLayer){var a=e.containerPoint;this.baseLayer.clickEvent(a,e.domEvent)}}},{key:"mousemoveEvent",value:function(e){if(!!this.baseLayer){var a=e.containerPoint;this.baseLayer.mousemoveEvent(a,e.domEvent)}}},{key:"getEvents",value:function(){return{click:this.clickEvent,mousemove:this.mousemoveEvent}}},{key:"init",value:function(e){var a=this.baseLayer;a.options=e,a.initDataRange(e),a.context=a.options.context||"2d",a.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}}]),t}(maptalks.Layer);var In=function(i){it(t,i);function t(){return Q(this,t),nt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return tt(t,[{key:"needToRedraw",value:function(){var e=this.layer.baseLayer;return e.isEnabledTime()?!0:$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"needToRedraw",this).call(this)}},{key:"draw",value:function(){var e=this.layer.baseLayer;(!this.canvas||!e.isEnabledTime()||this._shouldClear)&&(this.prepareCanvas(),this._shouldClear=!1),this._update(this.gl||this.context,this._mapvFrameTime),delete this._mapvFrameTime,this.completeRender()}},{key:"drawOnInteracting",value:function(){this.draw(),this._shouldClear=!1}},{key:"onSkipDrawOnInteracting",value:function(){this._shouldClear=!0}},{key:"_canvasUpdate",value:function(e){this.setToRedraw(),this._mapvFrameTime=e}},{key:"_update",value:function(e,a){if(!!this.canvas){var r=this.layer.baseLayer,o=r.options.animation,s=this.getMap();if(r.isEnabledTime()){if(a===void 0){Y(e);return}r.context=="2d"&&(e.save(),e.globalCompositeOperation="destination-out",e.fillStyle="rgba(0, 0, 0, .1)",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.restore())}else Y(e);if(r.context=="2d")for(var h in r.options)e[h]=r.options[h];else e.clear(e.COLOR_BUFFER_BIT);var u=1,v=new maptalks.Coordinate(0,0),l={fromColumn:r.options.coordType==="bd09mc"?"coordinates_mercator":"coordinates",transferCoordinate:function(y){v.x=y[0],v.y=y[1];var _=s.coordToContainerPoint(v)._multi(u).toArray();return _}};a!==void 0&&(l.filter=function(g){var y=o.trails||10;return!!(a&&g.time>a-y&&g.time<a)});var c=r.dataSet.get(l);r.processData(c),r.options.unit=="m"?(r.options.size&&(r.options._size=r.options.size/zoomUnit),r.options.width&&(r.options._width=r.options.width/zoomUnit),r.options.height&&(r.options._height=r.options.height/zoomUnit)):(r.options._size=r.options.size,r.options._height=r.options.height,r.options._width=r.options.width);var f=new maptalks.Point(0,0),p=s._pointToContainerPoint(f)._multi(u);r.drawContext(e,c,r.options,p),r.options.updateCallback&&r.options.updateCallback(a)}}},{key:"createCanvas",value:function(){if(!this.canvas){var e=this.getMap(),a=e.getSize(),r=e.getDevicePixelRatio?e.getDevicePixelRatio():maptalks.Browser.retina?2:1,o=r*a.width,s=r*a.height;this.canvas=maptalks.Canvas.createCanvas(o,s,e.CanvasClass);var h=this.layer.baseLayer.context;if(h==="2d")this.context=this.canvas.getContext("2d"),this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation),this.layer.baseLayer.options.draw!=="heatmap"&&r!==1&&this.context.scale(r,r);else{var u={alpha:!0,preserveDrawingBuffer:!0,antialias:!1};this.gl=this.canvas.getContext("webgl",u)}this.onCanvasCreate(),this._bindToMapv(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}}},{key:"_bindToMapv",value:function(){var e=this.layer.baseLayer,a=this.getMap();this.devicePixelRatio=a.getDevicePixelRatio?a.getDevicePixelRatio():maptalks.Browser.retina?2:1,e.canvasLayer=this,e._canvasUpdate=this._canvasUpdate.bind(this),e.getContext=function(){var r=self.getRenderer();return r.gl||r.context}}}]),t}(maptalks.renderer.CanvasRenderer);Ht.registerRenderer("canvas",In)}var zn=Ht,Rn=function(t,n,e){if(typeof document!="undefined"){var a=document.createElement("canvas");return a.width=t,a.height=n,a}else return new e(t,n)},An=function(i){it(t,i);function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments[1],a=arguments[2];Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a));return r.options=a,r.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},r.layer_=null,r.initDataRange(a),r.initAnimator(),r.onEvents(),n.on("complete",function(){this.init(n,a),this.argCheck(a)},r),r}return tt(t,[{key:"init",value:function(e,a){if(e)this.map=e,this.context=this.options.context||"2d",this.getCanvasLayer();else throw new Error("not map object")}},{key:"_canvasUpdate",value:function(e){this.render(this.canvasLayer.canvas,e)}},{key:"render",value:function(e,a){if(!!e){var r=this.map,o=e.getContext(this.context),s=this.options.animation;if(this.isEnabledTime()){if(a===void 0)return Y(o),this;this.context==="2d"&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else Y(o);if(this.context==="2d")for(var h in this.options)o[h]=this.options[h];else o.clear(o.COLOR_BUFFER_BIT);var u={transferCoordinate:function(c){var f=r.lngLatToContainer(new AMap.LngLat(c[0],c[1]));return[f.x,f.y]}};a!==void 0&&(u.filter=function(l){var c=s.trails||10;return!!(a&&l.time>a-c&&l.time<a)});var v=this.dataSet.get(u);return this.processData(v),this.options.unit==="m"?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(o,new M(v),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(a),this}}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var e=this.canvasFunction(),a=this.map.getBounds();this.layer_=new AMap.CanvasLayer({canvas:e,bounds:this.options.bounds||a,zooms:this.options.zooms||[0,22]}),this.layer_.setMap(this.map),this.map.on("mapmove",this.canvasFunction,this),this.map.on("zoomchange",this.canvasFunction,this)}}},{key:"canvasFunction",value:function(){var e=[this.map.getSize().width,this.map.getSize().height],a=e[0],r=e[1];if(!this.canvasLayer.canvas)this.canvasLayer.canvas=Rn(a,r);else{this.canvasLayer.canvas.width=a,this.canvasLayer.canvas.height=r;var o=this.map.getBounds();this.layer_&&this.layer_.setBounds(this.options.bounds||o)}return this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"removeLayer",value:function(){!this.map||(this.unEvents(),this.map.removeLayer(this.layer_),delete this.map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,a,e)}},{key:"mousemoveEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,a,e)}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent,this),this.map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var e=this.map;this.unEvents(),this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent,this),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent,this),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent,this))}}]),t}(at),Tn=function(t,n){if(typeof document!="undefined"){var e=document.createElement("canvas");return e.width=t,e.height=n,e}},Dn=function(i){it(t,i);function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments[1],a=arguments[2];Q(this,t);var r=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a));return r.options=a,r.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},r.layer_=null,r.previousCursor_=void 0,r.init(n,a),r.argCheck(a),r}return tt(t,[{key:"init",value:function(e,a){if(e&&e instanceof ol.Map)this.$Map=e,this.context=this.options.context||"2d",this.getCanvasLayer(),this.initDataRange(a),this.initAnimator(),this.onEvents();else throw new Error("not map object")}},{key:"_canvasUpdate",value:function(e){this.render(this.canvasLayer.canvas,e)}},{key:"render",value:function(e,a){var r=this.$Map,o=e.getContext(this.context),s=this.options.animation,h=this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326",u=this.$Map.getView().getProjection().getCode();if(this.isEnabledTime()){if(a===void 0)return Y(o),this;this.context==="2d"&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else Y(o);if(this.context==="2d")for(var v in this.options)o[v]=this.options[v];else o.clear(o.COLOR_BUFFER_BIT);var l={};l.transferCoordinate=h===u?function(f){return r.getPixelFromCoordinate(f)}:function(f){return r.getPixelFromCoordinate(ol.proj.transform(f,h,u))},a!==void 0&&(l.filter=function(f){var p=s.trails||10;return!!(a&&f.time>a-p&&f.time<a)});var c=this.dataSet.get(l);return this.processData(c),this.options.unit==="m"?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(o,new M(c),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(a),this}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var e=this.getMapExtent();this.layer_=new ol.layer.Image({layerName:this.options.layerName,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution,zIndex:this.options.zIndex,extent:e,source:new ol.source.ImageCanvas({canvasFunction:this.canvasFunction.bind(this),projection:this.$Map.getView().getProjection().getCode(),ratio:this.options.hasOwnProperty("ratio")?this.options.ratio:1})}),this.$Map.addLayer(this.layer_),this.$Map.un("precompose",this.reRender,this),this.$Map.on("precompose",this.reRender,this)}}},{key:"reRender",value:function(){if(!!this.layer_){var e=this.getMapExtent();this.layer_.setExtent(e)}}},{key:"canvasFunction",value:function(e,a,r,o,s){return this.canvasLayer.canvas?(this.canvasLayer.canvas.width=o[0],this.canvasLayer.canvas.height=o[1]):this.canvasLayer.canvas=Tn(o[0],o[1]),this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"getMapExtent",value:function(){var e=this.$Map.getSize();return this.$Map.getView().calculateExtent(e)}},{key:"addTo",value:function(e){this.init(e,this.options)}},{key:"removeLayer",value:function(){!this.$Map||(this.unEvents(),this.$Map.un("precompose",this.reRender,this),this.$Map.removeLayer(this.layer_),delete this.$Map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,{x:a[0],y:a[1]},e)}},{key:"mousemoveEvent",value:function(e){var a=e.pixel;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,{x:a[0],y:a[1]},e)}},{key:"addAnimatorEvent",value:function(){this.$Map.on("movestart",this.animatorMovestartEvent,this),this.$Map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var e=this.$Map;this.unEvents(),this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent,this),this.options.methods.mousemove&&e.on("pointermove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var e=this.$Map;this.options.methods&&(this.options.methods.click&&e.un("click",this.clickEvent,this),this.options.methods.pointermove&&e.un("pointermove",this.mousemoveEvent,this))}},{key:"setDefaultCursor",value:function(e,a){if(!!this.$Map){var r=this.$Map.getTargetElement();a?r.style.cursor!==e&&(this.previousCursor_=r.style.cursor,r.style.cursor=e):this.previousCursor_!==void 0&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},{key:"show",value:function(){this.$Map.addLayer(this.layer_)}},{key:"hide",value:function(){this.$Map.removeLayer(this.layer_)}}]),t}(at),Fn=function(i){it(t,i);function t(n,e,a,r){Q(this,t);var o=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,a,r));if(!at)return nt(o);var s=o;return r=r||{},s.init(r),s.argCheck(r),o.canvasLayer=e,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o._moveStartEvent=o.moveStartEvent.bind(o),o._moveEndEvent=o.moveEndEvent.bind(o),o._zoomStartEvent=o.zoomStartEvent.bind(o),o.bindEvent(),o}return tt(t,[{key:"clickEvent",value:function(e){var a=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio,o=e.layerPoint;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,L.point((o.x-a.x)/r,(o.y-a.y)/r),e)}},{key:"mousemoveEvent",value:function(e){var a=e.layerPoint;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,a,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(e,a){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:a})}},{key:"update",value:function(e){var a=e||{},r=a.data;r&&r.get&&(r=r.get()),r!=null&&this.dataSet.set(r),$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,{options:a.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(!!this.dataSet){var a=this.dataSet.get({filter:function(o){return e!=null&&typeof e=="function"?!e(o):!0}});this.dataSet.set(a),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(e){if(!!this.canvasLayer){var a=this,r=a.options.animation,o=this.getContext(),s=this.map;if(a.isEnabledTime()){if(e===void 0){this.clear(o);return}this.context==="2d"&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if(this.context==="2d")for(var h in a.options)o[h]=a.options[h];else o.clear(o.COLOR_BUFFER_BIT);if(!(a.options.minZoom&&s.getZoom()<a.options.minZoom||a.options.maxZoom&&s.getZoom()>a.options.maxZoom)){var u=s.getBounds(),v=u.getEast()-u.getWest(),l=u.getNorth()-u.getSouth(),c=s.getSize(),f=v/c.x,p=l/c.y,g=this.canvasLayer.getTopLeft(),y=s.latLngToContainerPoint(g),_={transferCoordinate:function(z){var B;a.context==="2d"?B=s.latLngToContainerPoint(L.latLng(z[1],z[0])):B={x:(z[0]-g.lng)/f,y:(g.lat-z[1])/p};var I={x:B.x-y.x,y:B.y-y.y};return[I.x,I.y]}};e!==void 0&&(_.filter=function(b){var z=r.trails||10;return e&&b.time>e-z&&b.time<e});var w=a.dataSet.get(_);this.processData(w),a.options._size=a.options.size;var E=s.latLngToContainerPoint(L.latLng(0,0)),x={x:E.x-y.x,y:E.y-y.y};this.drawContext(o,w,a.options,x),a.options.updateCallback&&a.options.updateCallback(e)}}}},{key:"init",value:function(e){var a=this;a.options=e,this.initDataRange(e),this.context=a.options.context||"2d",a.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(a.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),t}(at),ye;if(typeof L!="undefined"){var Bn=L.Layer.extend({options:{attributionPrefix:null,attribution:""},initialize:function(t,n,e){e=e||{},this.dataSet=t||{},this.mapVOptions=n||{},this.render=this.render.bind(this),L.Util.setOptions(this,e),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),L.stamp(this)},onAdd:function(t){this._map=t;var n=this.getPane(),e=this.container=L.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",n);e.appendChild(this.canvas);var a=t.getSize();e.style.width=a.x+"px",e.style.height=a.y+"px",this.renderer=new Fn(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){L.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,n){this.renderer.addData(t,n)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t=this._map,n;if(t){var e=t.getBounds();n=e.getNorthWest()}return n},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top=0+"px",t.style.left=0+"px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var n=typeof window=="undefined"?{}:window,e=this.devicePixelRatio=n.devicePixelRatio;return(!this.mapVOptions.context||this.mapVOptions.context==="2d")&&t.getContext("2d").scale(e,e),t},_resize:function(){var t=this.canvas;if(!!t){var n=this._map,e=n.getSize();t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px";var a=n.getBounds(),r=n.latLngToLayerPoint(a.getNorthWest());L.DomUtil.setPosition(t,r)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}});ye=function(t,n,e){return new Bn(t,n,e)}}var Un=ye,Zn=function(i){it(t,i);function t(n,e,a,r){Q(this,t);var o=nt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e,a));return at?(o.map=n,o.scene=n.scene,o.dataSet=e,a=a||{},o.init(a),o.argCheck(a),o.initDevicePixelRatio(),o.canvasLayer=r,o.stopAniamation=!1,o.animation=a.animation,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o):nt(o)}return tt(t,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(e){var a=e.point;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,a,e)}},{key:"mousemoveEvent",value:function(e){var a=e.point;$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,a,e)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.map,this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(e){this.map;var a=this.scene;if(this.canvasLayer&&!this.stopAniamation){var r=this.options.animation,o=this.getContext();if(this.isEnabledTime()){if(e===void 0)return void this.clear(o);this.context==="2d"&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if(this.context==="2d")for(var s in this.options)o[s]=this.options[s];else o.clear(o.COLOR_BUFFER_BIT);var h={transferCoordinate:function(c){var f=Cesium.Cartesian3.fromDegrees(c[0],c[1]),p=Cesium.SceneTransforms.wgs84ToWindowCoordinates(a,f);return p==null?[-1,-1]:[p.x,p.y]}};e!==void 0&&(h.filter=function(l){var c=r.trails||10;return!!(e&&l.time>e-c&&l.time<e)});var u=this.dataSet.get(h);this.processData(u),this.options.unit=="m"&&this.options.size,this.options._size=this.options.size;var v=Cesium.SceneTransforms.wgs84ToWindowCoordinates(a,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(o,new M(u),this.options,v),this.options.updateCallback&&this.options.updateCallback(e)}}},{key:"updateData",value:function(e,a){var r=e;r&&r.get&&(r=r.get()),r!=null&&this.dataSet.set(r),$(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,{options:a})}},{key:"addData",value:function(e,a){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:a})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var a=this.dataSet.get({filter:function(o){return e==null||typeof e!="function"||!e(o)}});this.dataSet.set(a),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}]),t}(at),_e;if(typeof Cesium!="undefined"){var Nn=0;Cesium;var Hn=function(){function i(t,n,e,a){if(Q(this,i),this.map=t,this.scene=t.scene,this.mapvBaseLayer=new Zn(t,n,e,this),this.mapVOptions=e,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),a)this.container=a;else{var r=t.container.querySelector(".cesium-viewer-cesiumWidgetContainer");this.container=r||t.container}this.addInnerContainer(),this.bindEvent(),this._reset()}return tt(i,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var n=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var e=new Cesium.ScreenSpaceEventHandler(this.scene.canvas);e.setInputAction(function(a){n.innerMoveEnd()},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(a){n.innerMoveEnd()},Cesium.ScreenSpaceEventType.MIDDLE_UP),this.handler=e}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&(this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this))}},{key:"moveEndEvent",value:function(){this.mapvBaseLayer&&(this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer.animatorMoveendEvent(),this._reset())}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(n,e){this.mapvBaseLayer!=null&&this.mapvBaseLayer.addData(n,e)}},{key:"updateData",value:function(n,e){this.mapvBaseLayer!=null&&this.mapvBaseLayer.updateData(n,e)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(n){this.mapvBaseLayer!=null&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(n)}},{key:"removeAllData",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var n=document.createElement("canvas");n.id=this.mapVOptions.layerid||"mapv"+Nn++,n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=this.mapVOptions.zIndex||0,n.width=parseInt(this.map.canvas.width),n.height=parseInt(this.map.canvas.height),n.style.width=this.map.canvas.style.width,n.style.height=this.map.canvas.style.height;var e=this.devicePixelRatio;return this.mapVOptions.context=="2d"&&n.getContext(this.mapVOptions.context).scale(e,e),n}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.mapvBaseLayer!=null&&(this.removeAllData(),this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(n){n!=null&&this.updateData(n.data,n.options)}},{key:"resizeCanvas",value:function(){if(this.canvas!=null&&this.canvas!=null){var n=this.canvas;n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.width=parseInt(this.map.canvas.width),n.height=parseInt(this.map.canvas.height),n.style.width=this.map.canvas.style.width,n.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer._canvasUpdate()}}]),i}();_e=function(t,n,e,a){return new Hn(t,n,e,a)}}var Wn=_e,$n={getDataSet:function(t){var n=[],e=t.features;if(e)for(var a=0;a<e.length;a++){var r=e[a],o=r.geometry,s=r.properties,h={};for(var u in s)h[u]=s[u];h.geometry=o,n.push(h)}return new M(n)}},Vn={CSVToArray:function(t,n){n=n||",";for(var e=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),a=[[]],r=null;r=e.exec(t);){var o=r[1];o.length&&o!==n&&a.push([]);var s;r[2]?s=r[2].replace(new RegExp('""',"g"),'"'):s=r[3],a[a.length-1].push(s)}return a},getDataSet:function(t,n){for(var e=this.CSVToArray(t,n||","),a=[],r=e[0],o=1;o<e.length-1;o++){for(var s=e[o],h={},u=0;u<s.length;u++){var v=s[u];r[u]=="geometry"&&(v=JSON.parse(v)),h[r[u]]=v}a.push(h)}return new M(a)}};k.version=Pt,k.canvasClear=Y,k.canvasResolutionScale=Ce,k.canvasDrawSimple=$t,k.canvasDrawHeatmap=Yt,k.canvasDrawGrid=Jt,k.canvasDrawHoneycomb=jt,k.webglDrawSimple=re,k.webglDrawPoint=Qt,k.webglDrawLine=Kt,k.webglDrawPolygon=ie,k.utilCityCenter=Wt,k.utilCurve=rn,k.utilForceEdgeBundling=on,k.utilDataRangeIntensity=V,k.utilDataRangeCategory=yt,k.utilDataRangeChoropleth=lt,k.Map=sn,k.baiduMapCanvasLayer=K,k.baiduMapAnimationLayer=Pn,k.baiduMapLayer=kn,k.googleMapCanvasLayer=T,k.googleMapLayer=On,k.MaptalksLayer=zn,k.AMapLayer=An,k.OpenlayersLayer=Dn,k.leafletMapLayer=Un,k.cesiumMapLayer=Wn,k.DataSet=M,k.geojson=$n,k.csv=Vn,Object.defineProperty(k,"__esModule",{value:!0})})})(xe,xe.exports);export{xe as m};
