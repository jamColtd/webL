System.register(["./@babel-legacy-55346a6e.js","./react-legacy-700da723.js","./react-dom-legacy-f02cb59a.js","./rc-util-legacy-608bab30.js","./classnames-legacy-fbfdb612.js","./rc-motion-legacy-cc8263dd.js","./rc-align-legacy-de71a606.js"],(function(e){"use strict";var o,t,n,i,r,s,u,a,p,l,c,d,f,h,m,v,g,x,T,M,C,y,b,k,w,P;return{setters:[function(e){o=e.a,t=e.j,n=e.c,i=e.p,r=e.r,s=e.b,u=e.e,a=e.f,p=e.g,l=e.h,c=e.i},function(e){d=e.r},function(e){f=e.R},function(e){h=e.f,m=e.d,v=e.z,g=e.A,x=e.h,T=e.y,M=e.i,C=e.s,y=e.e,b=e.B},function(e){k=e.c},function(e){w=e.C},function(e){P=e.R}],execute:function(){function D(e,o,t){return t?e[0]===o[0]:e[0]===o[0]&&e[1]===o[1]}function E(e){var o=e.prefixCls,t=e.motion,n=e.animation,i=e.transitionName;return t||(n?{motionName:"".concat(o,"-").concat(n)}:i?{motionName:i}:null)}function O(e){var n=e.prefixCls,i=e.visible,r=e.zIndex,s=e.mask,u=e.maskMotion,a=e.maskAnimation,p=e.maskTransitionName;if(!s)return null;var l={};return(u||p||a)&&(l=o({motionAppear:!0},E({motion:u,prefixCls:n,transitionName:p,animation:a}))),d.exports.createElement(w,t({},l,{visible:i,removeOnLeave:!0}),(function(e){var o=e.className;return d.exports.createElement("div",{style:{zIndex:r},className:k("".concat(n,"-mask"),o)})}))}var N=["measure","alignPre","align",null,"motion"],H=d.exports.forwardRef((function(e,s){var u=e.visible,a=e.prefixCls,p=e.className,l=e.style,c=e.children,f=e.zIndex,g=e.stretch,x=e.destroyPopupOnHide,T=e.forceRender,M=e.align,C=e.point,y=e.getRootDomNode,b=e.getClassNameFromAlign,D=e.onAlign,O=e.onMouseEnter,H=e.onMouseLeave,S=e.onMouseDown,V=e.onTouchStart,R=d.exports.useRef(),A=d.exports.useRef(),L=d.exports.useState(),F=n(L,2),I=F[0],B=F[1],j=function(e){var o=d.exports.useState({width:0,height:0}),t=n(o,2),i=t[0],r=t[1];return[d.exports.useMemo((function(){var o={};if(e){var t=i.width,n=i.height;-1!==e.indexOf("height")&&n?o.height=n:-1!==e.indexOf("minHeight")&&n&&(o.minHeight=n),-1!==e.indexOf("width")&&t?o.width=t:-1!==e.indexOf("minWidth")&&t&&(o.minWidth=t)}return o}),[e,i]),function(e){r({width:e.offsetWidth,height:e.offsetHeight})}]}(g),z=n(j,2),U=z[0],W=z[1],X=function(e,o){var t=h(null),s=n(t,2),u=s[0],a=s[1],p=d.exports.useRef();function l(e){a(e,!0)}function c(){m.cancel(p.current)}return d.exports.useEffect((function(){l("measure")}),[e]),d.exports.useEffect((function(){"measure"===u&&o(),u&&(p.current=m(i(r.mark((function e(){var o,t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=N.indexOf(u),(t=N[o+1])&&-1!==o&&l(t);case 3:case"end":return e.stop()}}),e)})))))}),[u]),d.exports.useEffect((function(){return function(){c()}}),[]),[u,function(e){c(),p.current=m((function(){l((function(e){switch(u){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(u,(function(){g&&W(y())})),Y=n(X,2),q=Y[0],G=Y[1],J=d.exports.useState(0),K=n(J,2),Q=K[0],Z=K[1],$=d.exports.useRef();function _(){var e;null===(e=R.current)||void 0===e||e.forceAlign()}function ee(e,o){var t=b(o);I!==t&&B(t),Z((function(e){return e+1})),"align"===q&&(null==D||D(e,o))}v((function(){"alignPre"===q&&Z(0)}),[q]),v((function(){"align"===q&&(Q<2?_():G((function(){var e;null===(e=$.current)||void 0===e||e.call($)})))}),[Q]);var oe=o({},E(e));function te(){return new Promise((function(e){$.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var o=oe[e];oe[e]=function(e,t){return G(),null==o?void 0:o(e,t)}})),d.exports.useEffect((function(){oe.motionName||"motion"!==q||G()}),[oe.motionName,q]),d.exports.useImperativeHandle(s,(function(){return{forceAlign:_,getElement:function(){return A.current}}}));var ne=o(o({},U),{},{zIndex:f,opacity:"motion"!==q&&"stable"!==q&&u?0:void 0,pointerEvents:u||"stable"===q?void 0:"none"},l),ie=!0;!(null==M?void 0:M.points)||"align"!==q&&"stable"!==q||(ie=!1);var re=c;return d.exports.Children.count(c)>1&&(re=d.exports.createElement("div",{className:"".concat(a,"-content")},c)),d.exports.createElement(w,t({visible:u,ref:A,leavedClassName:"".concat(a,"-hidden")},oe,{onAppearPrepare:te,onEnterPrepare:te,removeOnLeave:x,forceRender:T}),(function(e,t){var n=e.className,i=e.style,r=k(a,p,I,n);return d.exports.createElement(P,{target:C||y,key:"popup",ref:R,monitorWindowResize:!0,disabled:ie,align:M,onAlign:ee},d.exports.createElement("div",{ref:t,className:r,onMouseEnter:O,onMouseLeave:H,onMouseDownCapture:S,onTouchStartCapture:V,style:o(o({},i),ne)},re))}))}));H.displayName="PopupInner";var S=d.exports.forwardRef((function(e,n){var i=e.prefixCls,r=e.visible,s=e.zIndex,u=e.children,a=e.mobile,p=(a=void 0===a?{}:a).popupClassName,l=a.popupStyle,c=a.popupMotion,f=void 0===c?{}:c,h=a.popupRender,m=d.exports.useRef();d.exports.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return m.current}}}));var v=o({zIndex:s},l),g=u;return d.exports.Children.count(u)>1&&(g=d.exports.createElement("div",{className:"".concat(i,"-content")},u)),h&&(g=h(g)),d.exports.createElement(w,t({visible:r,ref:m,removeOnLeave:!0},f),(function(e,t){var n=e.className,r=e.style,s=k(i,p,n);return d.exports.createElement("div",{ref:t,className:s,style:o(o({},r),v)},g)}))}));S.displayName="MobilePopupInner";var V=["visible","mobile"],R=d.exports.forwardRef((function(e,i){var r=e.visible,u=e.mobile,a=s(e,V),p=d.exports.useState(r),l=n(p,2),c=l[0],f=l[1],h=d.exports.useState(!1),m=n(h,2),v=m[0],x=m[1],T=o(o({},a),{},{visible:c});d.exports.useEffect((function(){f(r),r&&u&&x(g())}),[r,u]);var M=v?d.exports.createElement(S,t({},T,{mobile:u,ref:i})):d.exports.createElement(H,t({},T,{ref:i}));return d.exports.createElement("div",null,d.exports.createElement(O,T),M)}));R.displayName="Popup";var A=d.exports.createContext(null);function L(){}function F(){return""}function I(e){return e?e.ownerDocument:window.document}var B=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];e("T",function(e){var n=function(n){u(r,n);var i=a(r);function r(e){var o,n;return p(this,r),(o=i.call(this,e)).popupRef=d.exports.createRef(),o.triggerRef=d.exports.createRef(),o.portalContainer=void 0,o.attachId=void 0,o.clickOutsideHandler=void 0,o.touchOutsideHandler=void 0,o.contextMenuOutsideHandler1=void 0,o.contextMenuOutsideHandler2=void 0,o.mouseDownTimeout=void 0,o.focusTime=void 0,o.preClickTime=void 0,o.preTouchTime=void 0,o.delayTimer=void 0,o.hasPopupMouseDown=void 0,o.onMouseEnter=function(e){var t=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",e),o.delaySetPopupVisible(!0,t,t?null:e)},o.onMouseMove=function(e){o.fireEvents("onMouseMove",e),o.setPoint(e)},o.onMouseLeave=function(e){o.fireEvents("onMouseLeave",e),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onPopupMouseEnter=function(){o.clearDelayTimer()},o.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&x(null===(t=o.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onFocus=function(e){o.fireEvents("onFocus",e),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))},o.onMouseDown=function(e){o.fireEvents("onMouseDown",e),o.preClickTime=Date.now()},o.onTouchStart=function(e){o.fireEvents("onTouchStart",e),o.preTouchTime=Date.now()},o.onBlur=function(e){o.fireEvents("onBlur",e),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)},o.onContextMenu=function(e){e.preventDefault(),o.fireEvents("onContextMenu",e),o.setPopupVisible(!0,e)},o.onContextMenuClose=function(){o.isContextMenuToShow()&&o.close()},o.onClick=function(e){if(o.fireEvents("onClick",e),o.focusTime){var t;if(o.preClickTime&&o.preTouchTime?t=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?t=o.preClickTime:o.preTouchTime&&(t=o.preTouchTime),Math.abs(t-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!o.state.popupVisible;(o.isClickToHide()&&!n||n&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,e)},o.onPopupMouseDown=function(){var e;o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout((function(){o.hasPopupMouseDown=!1}),0),o.context&&(e=o.context).onPopupMouseDown.apply(e,arguments)},o.onDocumentClick=function(e){if(!o.props.mask||o.props.maskClosable){var t=e.target,n=o.getRootDomNode(),i=o.getPopupDomNode();x(n,t)&&!o.isContextMenuOnly()||x(i,t)||o.hasPopupMouseDown||o.close()}},o.getRootDomNode=function(){var e=o.props.getTriggerDOMNode;if(e)return e(o.triggerRef.current);try{var t=T(o.triggerRef.current);if(t)return t}catch(n){}return f.findDOMNode(l(o))},o.getPopupClassNameFromAlign=function(e){var t=[],n=o.props,i=n.popupPlacement,r=n.builtinPlacements,s=n.prefixCls,u=n.alignPoint,a=n.getPopupClassNameFromAlign;return i&&r&&t.push(function(e,o,t,n){for(var i=t.points,r=Object.keys(e),s=0;s<r.length;s+=1){var u=r[s];if(D(e[u].points,i,n))return"".concat(o,"-placement-").concat(u)}return""}(r,s,e,u)),a&&t.push(a(e)),t.join(" ")},o.getComponent=function(){var e=o.props,n=e.prefixCls,i=e.destroyPopupOnHide,r=e.popupClassName,s=e.onPopupAlign,u=e.popupMotion,a=e.popupAnimation,p=e.popupTransitionName,l=e.popupStyle,c=e.mask,f=e.maskAnimation,h=e.maskTransitionName,m=e.maskMotion,v=e.zIndex,g=e.popup,x=e.stretch,T=e.alignPoint,M=e.mobile,C=e.forceRender,y=o.state,b=y.popupVisible,k=y.point,w=o.getPopupAlign(),P={};return o.isMouseEnterToShow()&&(P.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(P.onMouseLeave=o.onPopupMouseLeave),P.onMouseDown=o.onPopupMouseDown,P.onTouchStart=o.onPopupMouseDown,d.exports.createElement(R,t({prefixCls:n,destroyPopupOnHide:i,visible:b,point:T&&k,className:r,align:w,onAlign:s,animation:a,getClassNameFromAlign:o.getPopupClassNameFromAlign},P,{stretch:x,getRootDomNode:o.getRootDomNode,style:l,mask:c,zIndex:v,transitionName:p,maskAnimation:f,maskTransitionName:h,maskMotion:m,ref:o.popupRef,motion:u,mobile:M,forceRender:C}),"function"==typeof g?g():g)},o.attachParent=function(e){m.cancel(o.attachId);var t,n=o.props,i=n.getPopupContainer,r=n.getDocument,s=o.getRootDomNode();i?(s||0===i.length)&&(t=i(s)):t=r(o.getRootDomNode()).body,t?t.appendChild(e):o.attachId=m((function(){o.attachParent(e)}))},o.getContainer=function(){if(!o.portalContainer){var e=(0,o.props.getDocument)(o.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",o.portalContainer=e}return o.attachParent(o.portalContainer),o.portalContainer},o.setPoint=function(e){o.props.alignPoint&&e&&o.setState({point:{pageX:e.pageX,pageY:e.pageY}})},o.handlePortalUpdate=function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)},o.triggerContextValue={onPopupMouseDown:o.onPopupMouseDown},n="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,o.state={prevPopupVisible:n,popupVisible:n},B.forEach((function(e){o["fire".concat(e)]=function(t){o.fireEvents(e,t)}})),o}return c(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,o=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=M(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=M(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=M(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=M(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),m.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,i=e.builtinPlacements;return t&&i?function(e,t,n){var i=e[t]||{};return o(o({},i),n)}(i,t,n):n}},{key:"setPopupVisible",value:function(e,o){var t=this.props.alignPoint,n=this.state.popupVisible;this.clearDelayTimer(),n!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:n}),this.props.onPopupVisibleChange(e)),t&&o&&e&&this.setPoint(o)}},{key:"delaySetPopupVisible",value:function(e,o,t){var n=this,i=1e3*o;if(this.clearDelayTimer(),i){var r=t?{pageX:t.pageX,pageY:t.pageY}:null;this.delayTimer=window.setTimeout((function(){n.setPopupVisible(e,r),n.clearDelayTimer()}),i)}else this.setPopupVisible(e,t)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var o=this.props.children.props,t=this.props;return o[e]&&t[e]?this["fire".concat(e)]:o[e]||t[e]}},{key:"isClickToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("contextMenu")||-1!==t.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,o){var t=this.props.children.props[e];t&&t(o);var n=this.props[e];n&&n(o)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,i=n.children,r=n.forceRender,s=n.alignPoint,u=n.className,a=n.autoDestroy,p=d.exports.Children.only(i),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,s&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var c=k(p&&p.props&&p.props.className,u);c&&(l.className=c);var f=o({},l);C(p)&&(f.ref=y(this.triggerRef,p.ref));var h,m=d.exports.cloneElement(p,f);return(t||this.popupRef.current||r)&&(h=d.exports.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&a&&(h=null),d.exports.createElement(A.Provider,{value:this.triggerContextValue},m,h)}}],[{key:"getDerivedStateFromProps",value:function(e,o){var t=e.popupVisible,n={};return void 0!==t&&o.popupVisible!==t&&(n.popupVisible=t,n.prevPopupVisible=o.popupVisible),n}}]),r}(d.exports.Component);return n.contextType=A,n.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:F,getDocument:I,onPopupVisibleChange:L,afterPopupVisibleChange:L,onPopupAlign:L,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},n}(b))}}}));
